import{r as t,j as e,b as ye}from"./react-CjgZUFtf.js";import{R as $s}from"./react-dom-CW-m76s0.js";import{L as z,O as Ze,N as Qs,u as ae,a as es,b as Ee,c as Ys,d as Hs,R as Ks,e as B}from"./react-router-MSCOizsS.js";import{a as Q,c as ce,P as Xs}from"./react-redux-93KjfrYX.js";import{a as fe}from"./axios-B9ygI19o.js";import{d as J}from"./dayjs-D9k7Q8rl.js";import{c as Ws,a as _e,f as Ae,b as Js,s as Zs}from"./@reduxjs-TioIQJ6d.js";import{C as ss,U as Z,S as ea,P as sa,L as qe,M as Se,a as ge,E as je,b as le,F as as,c as De,d as Oe,T as aa,e as ra,B as na,f as ta,g as oa,h as rs,i as ia,j as la,k as ca,l as da,m as ua,n as ma,o as ns,p as Ie,q as ts,r as Le,s as os,t as $e,u as Qe,v as ha,w as pa,x as is,y as ls,z as xa,A as ga,D as ja,G as Ea,H as Ye,I as fa,J as Sa,X as He,K as Ca,N as Pe,O as Na,Q as va,R as Ra,V as q,W as xe,Y as ba,Z as cs,_ as Ta,$ as ya,a0 as Ia,a1 as _a,a2 as Ce,a3 as Ne,a4 as Aa}from"./lucide-react-BjERbpHV.js";import{S as T}from"./sweetalert2-NNS-RXd7.js";import{C as ds}from"./compressorjs-CML2hMR0.js";import{u as Da,f as he,g as Oa,a as La,b as Pa,c as Ua,d as wa,e as Fa}from"./@tanstack-BHLyaDD6.js";import"./cookie-CqkleIqs.js";import"./scheduler-Bb8JjhAW.js";import"./use-sync-external-store-DDRgr1ZK.js";import"./redux-BXkGT1VS.js";import"./immer-Dh7Cefx8.js";import"./redux-thunk-ClJT1hhx.js";import"./@standard-schema-DjkmAgHD.js";import"./reselect-utOO-l3Z.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const g of o)if(g.type==="childList")for(const h of g.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const g={};return o.integrity&&(g.integrity=o.integrity),o.referrerPolicy&&(g.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?g.credentials="include":o.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function i(o){if(o.ep)return;o.ep=!0;const g=n(o);fetch(o.href,g)}})();const us="USER_REGISTER_REQUEST",ms="USER_REGISTER_SUCCESS",hs="USER_REGISTER_FAIL",ka="USER_REGISTER_RESET",ps="USER_SIGNIN_REQUEST",Ue="USER_SIGNIN_SUCCESS",xs="USER_SIGNIN_FAIL",gs="USER_SIGNIN_RESET",js="USER_SIGNOUT",Es="USER_DETAILS_REQUEST",fs="USER_DETAILS_SUCCESS",Ss="USER_DETAILS_FAIL",Ma="USER_DETAILS_RESET",Ga="USER_LIST_REQUEST",Va="USER_LIST_SUCCESS",Ba="USER_LIST_FAIL",Cs="USER_UPDATE_PROFILE_REQUEST",Ns="USER_UPDATE_PROFILE_SUCCESS",vs="USER_UPDATE_PROFILE_FAIL",pe="USER_UPDATE_PROFILE_RESET",za="USER_UPDATE_REQUEST",qa="USER_UPDATE_SUCCESS",$a="USER_UPDATE_FAIL",Qa="USER_UPDATE_RESET",Ya=(a,s,n,i,o,g)=>async h=>{h({type:us,payload:{email:s,password:o}});try{const{data:m}=await fe.post("/api/users/register",{nombre:a,email:s,apellido:n,cedula:i,password:o,telefono:g});h({type:ms,payload:m}),h({type:Ue,payload:m}),localStorage.setItem("userInfo",JSON.stringify(m))}catch(m){h({type:hs,payload:m.response&&m.response.data.message?m.response.data.message:m.message})}},Ha=(a,s)=>async n=>{n({type:ps,payload:{email:a,password:s}});try{const{data:i}=await fe.post("/api/users/signin",{email:a,password:s});n({type:Ue,payload:i}),localStorage.setItem("userInfo",JSON.stringify(i))}catch(i){n({type:xs,payload:i.response&&i.response.data.message?i.response.data.message:i.message})}},Ka=()=>a=>{localStorage.removeItem("userInfo"),localStorage.removeItem("cartItems"),localStorage.removeItem("shippingAddress"),a({type:js}),document.location.href="/signin"},Xa=a=>async(s,n)=>{s({type:Es,payload:a});const{userSignin:{userInfo:i}}=n();try{const{data:o}=await fe.get(`/api/users/${a}`,{headers:{Authorization:`Bearer ${i.token}`}});s({type:fs,payload:o})}catch(o){const g=o.response&&o.response.data.message?o.response.data.message:o.message;s({type:Ss,payload:g})}},Wa=a=>async(s,n)=>{s({type:Cs,payload:a});const{userSignin:{userInfo:i}}=n();try{const{data:o}=await fe.put("/api/users/profile",a,{headers:{Authorization:`Bearer ${i.token}`}});s({type:Ns,payload:o}),s({type:Ue,payload:o}),localStorage.setItem("userInfo",JSON.stringify(o))}catch(o){const g=o.response&&o.response.data.message?o.response.data.message:o.message;s({type:vs,payload:g})}},Ke="/assets/logo2-tAg73i7j.png",Rs=Ws({name:"splash",initialState:{isVisible:sessionStorage.getItem("splashShown")!=="true"},reducers:{hideSplash:a=>{a.isVisible=!1,sessionStorage.setItem("splashShown","true")}}}),{hideSplash:Ja}=Rs.actions,Za=Rs.reducer,er=()=>{const a=Q(g=>g.splash.isVisible),s=ce(),[n,i]=t.useState(!1);if(t.useEffect(()=>{if(a){const h=setTimeout(()=>{i(!0),setTimeout(()=>{s(Ja())},500)},2500);return()=>clearTimeout(h)}},[a,s]),!a)return null;const o=`splash-screen splash-screen-fade-in ${n?"splash-screen-fade-out":""}`;return e.jsxs("div",{className:o,children:[e.jsx("img",{src:"/logosplash.jpg",alt:"Logo Manager Demoda",className:"splash-logo"}),e.jsx("h1",{className:"splash-text",children:"MANAGER"})]})};function sr(){const[a]=t.useState(new Date),s=Q(d=>d.userSignin),n=Q(d=>d.splash.isVisible),{userInfo:i}=s,o=ce(),[g,h]=t.useState(!1),m=t.useRef(null),c=()=>{o(Ka()),h(!1)};return t.useEffect(()=>{const d=x=>{m.current&&!m.current.contains(x.target)&&h(!1)};return document.addEventListener("mousedown",d),()=>{document.removeEventListener("mousedown",d)}},[m]),n?e.jsx(er,{}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid-container",children:[e.jsxs("header",{className:"app-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx(z,{to:"/",children:e.jsx("img",{className:"img-logo",src:Ke,alt:"logo"})}),e.jsxs("div",{className:"header-title-group",children:[e.jsx("h2",{className:"title-manager",children:"D'moda-Manager"}),e.jsxs("span",{className:"negrita font-1 header-date",children:["caracas, ",J(a.toISOString()).format("DD-MM-YYYY")]})]})]}),e.jsx("div",{className:"header-right",children:i?e.jsxs("div",{className:"user-menu",ref:m,children:[e.jsxs("button",{className:"user-menu-trigger",onClick:()=>h(!g),children:[e.jsx("span",{children:(i==null?void 0:i.nombre)&&i.nombre.substring(0,10)}),e.jsx(ss,{size:16,className:`chevron-icon ${g?"open":""}`})]}),g&&e.jsxs("div",{className:"user-dropdown",children:[e.jsxs(z,{to:"/profile",className:"dropdown-item",onClick:()=>h(!1),children:[e.jsx(Z,{size:16}),e.jsx("span",{children:"Mi Perfil"})]}),i.isAdmin&&e.jsxs(z,{to:"/admin-menu",className:"dropdown-item",onClick:()=>h(!1),children:[e.jsx(ea,{size:16}),e.jsx("span",{children:"Admin"})]}),e.jsxs("button",{onClick:c,className:"dropdown-item signout",children:[e.jsx(sa,{size:16}),e.jsx("span",{children:"Cerrar Sesi贸n"})]})]})]}):e.jsxs(z,{to:"/signin",className:"header-login-button",children:[e.jsx(qe,{size:18}),e.jsx("span",{children:"Iniciar Sesi贸n"})]})})]}),e.jsx("main",{children:e.jsx(Ze,{})}),e.jsx("footer",{className:"app-footer",children:e.jsxs("span",{children:["漏 ",new Date().getFullYear()," D'moda-Manager. Todos los derechos reservados."]})})]})})}const ve=_e({reducerPath:"productApi",baseQuery:Ae({baseUrl:"/api",prepareHeaders:(a,{getState:s})=>{const n=s().userSignin.userInfo.token;return n&&a.set("Authorization",`Bearer ${n}`),a}}),tagTypes:["Product"],endpoints:a=>({getProducts:a.query({query:()=>"/productos",providesTags:["Product"]}),getProduct:a.query({query:s=>`/productos/buscar/${s}`}),addProduct:a.mutation({query:s=>({url:"/productos/create",method:"POST",body:s}),invalidatesTags:["Product"]}),updateProduct:a.mutation({query:s=>({url:`/productos/${s._id}`,method:"PUT",body:s}),invalidatesTags:["Product"]}),deleteProduct:a.mutation({query:s=>({url:`/productos/${s}`,method:"DELETE"}),invalidatesTags:["Product"]})})}),{useGetProductsQuery:Xe,useGetProductQuery:ar,useAddProductMutation:rr,useUpdateProductMutation:nr,useDeleteProductMutation:tr,useLazyGetProductQuery:or}=ve,Re=_e({reducerPath:"clienteApi",baseQuery:Ae({baseUrl:"/api",prepareHeaders:(a,{getState:s})=>{const n=s().userSignin.userInfo.token;return n&&a.set("Authorization",`Bearer ${n}`),a}}),tagTypes:["Cliente"],endpoints:a=>({getClientes:a.query({query:()=>"/clientes",providesTags:s=>s?[...s.map(({_id:n})=>({type:"Cliente",id:n})),{type:"Cliente",id:"LIST"}]:[{type:"Cliente",id:"LIST"}]}),getCliente:a.query({query:s=>`/clientes/${s}`,providesTags:(s,n,i)=>[{type:"Cliente",id:i}]}),registerCliente:a.mutation({query:s=>({url:"/clientes/register",method:"POST",body:s}),invalidatesTags:[{type:"Cliente",id:"LIST"}]}),updateCliente:a.mutation({query:({id:s,...n})=>({url:`/clientes/${s}`,method:"PUT",body:n}),invalidatesTags:(s,n,{id:i})=>[{type:"Cliente",id:i},{type:"Cliente",id:"LIST"}]}),getClienteByRif:a.query({query:s=>`/clientes/rif/${s}`}),deleteCliente:a.mutation({query:s=>({url:`/clientes/${s}`,method:"DELETE"}),invalidatesTags:(s,n,i)=>[{type:"Cliente",id:i}]})})}),{useGetClientesQuery:bs,useGetClienteQuery:ir,useRegisterClienteMutation:Ts,useDeleteClienteMutation:lr,useUpdateClienteMutation:cr,useLazyGetClienteByRifQuery:dr}=Re,ur="PRODUCT_CREATE_REQUEST",mr="PRODUCT_CREATE_SUCCESS",hr="PRODUCT_CREATE_FAIL",pr="PRODUCT_CREATE_RESET",xr="PRODUCT_LIST_REQUEST",gr="PRODUCT_LIST_SUCCESS",jr="PRODUCT_LIST_FAIL",Er="PRODUCT_LIST_RESET",ys="PRODUCT_DETAILS_REQUEST",Is="PRODUCT_DETAILS_SUCCESS",_s="PRODUCT_DETAILS_FAIL",fr="PRODUCT_ALL_REQUEST",Sr="PRODUCT_ALL_SUCCESS",Cr="PRODUCT_ALL_FAIL",Nr="PRODUCT_CARGASTOCK_REQUEST",vr="PRODUCT_CARGASTOCK_SUCCESS",Rr="PRODUCT_CARGASTOCK_FAIL",br="PRODUCT_CARCGASTOCK_RESET",Tr=(a={},s)=>{switch(s.type){case ur:return{loading:!0};case mr:return{loading:!1,success:!0,product:s.payload};case hr:return{loading:!1,error:s.payload};case pr:return{};default:return a}},yr=(a={loading:!0,productos:[]},s)=>{switch(s.type){case xr:return{loading:!0};case gr:return{loading:!1,productos:s.payload.productos};case jr:return{loading:!1,error:s.payload};case Er:return{};default:return a}},Ir=(a={loading:!0},s)=>{switch(s.type){case ys:return{loading:!0};case Is:return{loading:!1,product:s.payload};case _s:return{loading:!1,error:s.payload};default:return a}},_r=(a={productos:[]},s)=>{switch(s.type){case fr:return{loading:!0};case Sr:return{loading:!1,productos:s.payload.productos,unidades:s.payload.unidades,valor:s.payload.valor,categorias:s.payload.categorias,stockAG:s.payload.myStockAG[0].totalStockAG,stockAG3:s.payload.myStockAG3[0].totalStockAG3,stockDM2:s.payload.myStockDM2[0].totalStockDM2,stockDM3:s.payload.myStockDM3[0].totalStockDM3,stockDM:s.payload.myStockDM[0].totalStockDM,stockA:s.payload.myStockA[0].totalStockA,stockXZ:s.payload.myStockXZ[0].totalStockXZ,stockXZ3:s.payload.myStockXZ3[0].totalStockXZ3,textil:s.payload.textiles[0].totalTextil};case Cr:return{loading:!1,error:s.payload};default:return a}},Ar=(a={},s)=>{switch(s.type){case Nr:return{loading:!0};case vr:return{loading:!1,success:!0,procesados:s.payload.procesados};case Rr:return{loading:!1,error:s.payload};case br:return{};default:return a}},Dr=(a={},s)=>{switch(s.type){case us:return{loading:!0};case ms:return{loading:!1,userInfo:s.payload};case hs:return{loading:!1,error:s.payload};default:return a}},Or=(a={},s)=>{switch(s.type){case ps:return{loading:!0};case Ue:return{loading:!1,userInfo:s.payload};case xs:return{loading:!1,error:s.payload};case js:return{};case gs:return{};default:return a}},Lr=(a={loading:!0},s)=>{switch(s.type){case Es:return{loading:!0};case fs:return{loading:!1,user:s.payload};case Ss:return{loading:!1,error:s.payload};case Ma:return{loading:!0};default:return a}},Pr=(a={},s)=>{switch(s.type){case Cs:return{loading:!0};case Ns:return{loading:!1,success:!0};case vs:return{loading:!1,error:s.payload};case pe:return{};default:return a}},Ur=(a={},s)=>{switch(s.type){case za:return{loading:!0};case qa:return{loading:!1,success:!0};case $a:return{loading:!1,error:s.payload};case Qa:return{};default:return a}},wr=(a={loading:!0,users:[]},s)=>{switch(s.type){case Ga:return{loading:!0};case Va:return{loading:!1,vendedores:s.payload};case Ba:return{loading:!1,error:s.payload};default:return a}},Fr="ORDER_CREATE_REQUEST",kr="ORDER_CREATE_SUCCESS",Mr="ORDER_CREATE_FAIL",Gr="ORDER_CREATE_RESET",Vr="ORDER_DETAILS_REQUEST",Br="ORDER_DETAILS_SUCCESS",zr="ORDER_DETAILS_FAIL",qr="ORDER_DELETE_REQUEST",$r="ORDER_DELETE_SUCCESS",Qr="ORDER_DELETE_FAIL",Yr="ORDER_DELETE_RESET",Hr="ORDER_SUMMARY_REQUEST",Kr="ORDER_SUMMARY_SUCCESS",Xr="ORDER_SUMMARY_FAIL",Wr="ORDER_ALL_REQUEST",Jr="ORDER_ALL_SUCCESS",Zr="ORDER_ALL_FAIL",en="GROUPBYDAY_REQUEST",sn="GROUPBYDAY_SUCCESS",an="GROUPBYDAY_FAIL",rn="CUADREDIA_REQUEST",nn="CUADREDIA_SUCCESS",tn="CUADREDIA_FAIL",on="ORDER_WEEKLY_REQUEST",ln="ORDER_WEEKLY_SUCCESS",cn="ORDER_WEEKLY_FAIL",dn="ORDER_LIST_REQUEST",un="ORDER_LIST_SUCCESS",mn="ORDER_LIST_FAIL",hn="ORDER_CONSOLIDADO_REQUEST",pn="ORDER_CONSOLIDADO_SUCCESS",xn="ORDER_CONSOLIDADO_FAIL",gn="ARTICULO_CONSOLIDADO_REQUEST",jn="ARTICULO_CONSOLIDADO_SUCCESS",En="ARTICULO_CONSOLIDADO_FAIL",fn=(a={},s)=>{switch(s.type){case Fr:return{loading:!0};case kr:return{loading:!1,success:!0,order:s.payload};case Mr:return{loading:!1,error:s.payload};case Gr:return{};default:return a}},Sn=(a={loading:!0},s)=>{switch(s.type){case Vr:return{loading:!0};case Br:return{loading:!1,order:s.payload};case zr:return{loading:!1,error:s.payload};default:return a}},Cn=(a={},s)=>{switch(s.type){case qr:return{loading:!0};case $r:return{loading:!1,success:!0};case Qr:return{loading:!1,error:s.payload};case Yr:return{};default:return a}},Nn=(a={loading:!0,summary:{}},s)=>{switch(s.type){case Hr:return{loading:!0};case Kr:return{loading:!1,summary:s.payload};case Xr:return{loading:!1,error:s.payload};default:return a}},vn=(a={cashea:[]},s)=>{switch(s.type){case Wr:return{loading:!0};case Jr:return{loading:!1,orders:s.payload.cashea,resumen:s.payload.resumenCashea[0]};case Zr:return{loading:!1,error:s.payload};default:return a}},Rn=(a={loading:!0,dailyOrders:{}},s)=>{switch(s.type){case en:return{loading:!0};case sn:return{loading:!1,dailyOrders:s.payload};case an:return{loading:!1,error:s.payload};default:return a}},bn=(a={orders:[],cash:{},puntoPlaza:[],puntoVenezuela:[],puntoBanesco:[]},s)=>{switch(s.type){case rn:return{loading:!0};case nn:return{loading:!1,orders:s.payload.orders,cash:s.payload.cash[0],puntoPlaza:s.payload.puntoPlaza,puntoVenezuela:s.payload.puntoVenezuela,puntoBanesco:s.payload.puntoBanesco};case tn:return{loading:!1,error:s.payload};default:return a}},Tn=(a={orders:[]},s)=>{switch(s.type){case on:return{loading:!0};case ln:return{loading:!1,orders:s.payload.orders};case cn:return{loading:!1,error:s.payload};default:return a}},yn=(a={orders:[]},s)=>{switch(s.type){case dn:return{loading:!0};case un:return{loading:!1,orders:s.payload.orders};case mn:return{loading:!1,error:s.payload};default:return a}},In=(a={ventasGlobales:[]},s)=>{switch(s.type){case hn:return{loading:!0};case pn:return{loading:!1,ventasGlobales:s.payload.ventasGlobales};case xn:return{loading:!1,error:s.payload};default:return a}},_n=(a={ventasGlobales:[]},s)=>{switch(s.type){case gn:return{loading:!0};case jn:return{loading:!1,ventasGlobales:s.payload.ventasGlobales};case En:return{loading:!1,error:s.payload};default:return a}},An="CLIENTE_REGISTER_REQUEST",Dn="CLIENTE_REGISTER_SUCCESS",On="CLIENTE_REGISTER_FAIL",Ln="CLIENTE_REGISTER_RESET",Pn="CLIENTE_DETAILS_REQUEST",Un="CLIENTE_DETAILS_SUCCESS",wn="CLIENTE_DETAILS_FAIL",Fn="CLIENTE_DETAILS_RESET",kn="CLIENTE_LIST_REQUEST",Mn="CLIENTE_LIST_SUCCESS",Gn="CLIENTE_LIST_FAIL",Vn="CLIENTE_LIST_RESET",Bn="CLIENTE_UPDATE_PROFILE_REQUEST",zn="CLIENTE_UPDATE_PROFILE_SUCCESS",qn="CLIENTE_UPDATE_PROFILE_FAIL",$n="CLIENTE_UPDATE_PROFILE_RESET",Qn=(a={loading:!0},s)=>{switch(s.type){case An:return{loading:!0};case Dn:return{loading:!1,cliente:s.payload};case On:return{loading:!1,error:s.payload};case Ln:return{};default:return a}},Yn=(a={loading:!0},s)=>{switch(s.type){case Pn:return{loading:!0};case Un:return{loading:!1,cliente:s.payload};case wn:return{loading:!1,error:s.payload};case Fn:return{};default:return a}},Hn=(a={},s)=>{switch(s.type){case Bn:return{loading:!0};case zn:return{loading:!1,success:!0};case qn:return{loading:!1,error:s.payload};case $n:return{};default:return a}},Kn=(a={clientes:[]},s)=>{switch(s.type){case kn:return{loading:!0};case Mn:return{loading:!1,clientes:s.payload.clientes};case Gn:return{loading:!1,error:s.payload};case Vn:return{};default:return a}},Xn="REPOSICION_CREATE_REQUEST",Wn="REPOSICION_CREATE_SUCCESS",Jn="REPOSICION_CREATE_FAIL",Zn="REPOSICION_CREATE_RESET",et="REPOSICION_DETAILS_REQUEST",st="REPOSICION_DETAILS_SUCCESS",at="REPOSICION_DETAILS_FAIL",rt="REPOSICION_LIST_REQUEST",nt="REPOSICION_LIST_SUCCESS",tt="REPOSICION_LIST_FAIL",ot="REPOSICION_DELETE_REQUEST",it="REPOSICION_DELETE_SUCCESS",lt="REPOSICION_DELETE_FAIL",ct="REPOSICION_DELETE_RESET",dt="REPOSICION_UPDATE_STATUS_REQUEST",ut="REPOSICION_UPDATE_STATUS_SUCCESS",mt="REPOSICION_UPDATE_STATUS_FAIL",ht="REPOSICION_UPDATE_STATUS_RESET",pt=(a={},s)=>{switch(s.type){case Xn:return{loading:!0};case Wn:return console.log("action.payload.reposicion",s.payload.reposicion),{loading:!1,success:!0,reposicion:s.payload};case Jn:return{loading:!1,error:s.payload};case Zn:return{};default:return a}},xt=(a={},s)=>{switch(s.type){case et:return{loading:!0};case st:return{loading:!1,reposicion:s.payload.reposicion};case at:return{loading:!1,error:s.payload};default:return a}},gt=(a={reposiciones:[]},s)=>{switch(s.type){case rt:return{loading:!0};case nt:return{loading:!1,reposiciones:s.payload.reposiciones};case tt:return{loading:!1,error:s.payload};default:return a}},jt=(a={},s)=>{switch(s.type){case ot:return{loading:!0};case it:return{loading:!1,success:!0};case lt:return{loading:!1,error:s.payload};case ct:return{};default:return a}},Et=(a={},s)=>{switch(s.type){case dt:return{loading:!0};case ut:return{loading:!1,success:!0};case mt:return{loading:!1,error:s.payload};case ht:return{};default:return a}},be=_e({reducerPath:"usersApi",baseQuery:Ae({baseUrl:"/api",prepareHeaders:(a,{getState:s})=>{const n=s().userSignin.userInfo.token;return n&&a.set("authorization",`Bearer ${n}`),a}}),endpoints:a=>({getUsers:a.query({query:()=>"/users"}),getVendedores:a.query({query:()=>"/users/vendedores"}),getUser:a.query({query:s=>`/user/${s}`}),registerUser:a.mutation({query:(s,n,i,o,g,h,m)=>({url:"/users/register",method:"POST",body:{nombre:s,rif:n,email:i,celular:o,direccion:g,canal:h,timestamp:m}}),invalidatesTags:["Users"]})})}),{useGetVendedoresQuery:As}=be,Te=_e({reducerPath:"orderApi",baseQuery:Ae({baseUrl:"/api",prepareHeaders:(a,{getState:s})=>{const n=s().userSignin.userInfo.token;return n&&a.set("Authorization",`Bearer ${n}`),a}}),tagTypes:["Order"],endpoints:a=>({getOrders:a.query({query:()=>"/orders",providesTags:["Order"]}),getCambio:a.query({query:()=>"/orders/cambiobcv"}),getOrder:a.query({query:s=>`/orders/${s}`}),invalidatesTags:["Order"],createOrder:a.mutation({query:s=>({url:"/orders",method:"POST",body:s}),invalidatesTags:["Order"]}),deleteOrder:a.mutation({query:s=>({url:`/orders/${s}`,method:"DELETE"}),invalidatesTags:["Order"]})})}),{useGetOrdersQuery:ft,useGetOrderQuery:Ds,useGetCambioQuery:Os,useCreateOrderMutation:St}=Te,Ct={userSignin:{userInfo:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):null}},Ls=Js({reducer:{splash:Za,userSignin:Or,userRegister:Dr,userDetails:Lr,userUpdateProfile:Pr,userUpdate:Ur,userList:wr,productCreate:Tr,productList:yr,productDetails:Ir,productAll:_r,productCargaStock:Ar,orderList:yn,orderCreate:fn,orderDetails:Sn,orderDelete:Cn,orderSummary:Nn,orderAll:vn,cuadreDia:bn,orderGroupDay:Rn,weeklyOrdersReport:Tn,clienteDetails:Yn,clienteUpdateProfile:Hn,clienteList:Kn,clienteRegister:Qn,reposicionCreate:pt,detailsReposicion:xt,reposicionList:gt,reposicionDelete:jt,reposicionUpdateStatus:Et,consolidadoOrdersReport:In,consolidadoArticulosReport:_n,[ve.reducerPath]:ve.reducer,[Re.reducerPath]:Re.reducer,[be.reducerPath]:be.reducer,[Te.reducerPath]:Te.reducer},middleware:a=>a().concat(ve.middleware,Re.middleware,be.middleware,Te.middleware),preloadedState:Ct});Zs(Ls.dispatch);const Nt=()=>{const a=Q(n=>n.userSignin),{userInfo:s}=a;return s?e.jsx(Ze,{}):e.jsx(Qs,{to:"/signin"})},ne="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAAANlBMVEVFRUVAQEA6Ojo1NTUxMTGFhYaVlZehoqOysrMkJCTh4eLr6+vU1NXExMVsbG1cXF0VFRVQUFASrDoiAAACRUlEQVR42rXT247rIAwFUNsY2+Hm+P9/9gBJm4w0mrezFRUVFhuqKpD+CN9J84HX9B8+MXy3XsPjn4U9CbsKAgLnAEi0F4kuiBFX1QW9t9YMeKiKSh5Os2RR0FI6Mm1IxN5KrUWYwof0UpoO2qW51donSfSCrY3jPM+Dcq+l50jErnOhE29IROlqbAYp8cRgrWv2hNluOLMgjwVr6znRTDpYuqoEivY6YbohfqGNRCtTqkhGD3lDSqO3qla7SRDhkiAiOu+sG+LdSAtmL8004/qOxEMnDf4NnrmZ6VgOMYWo6Ehayxcipg0Psv0Tlps466S0GvGCiHcjs3ebcjOiBRUWhL31BZHzhJYJkRzGgvErhESiYt2JXGNBc63lgXBDRA5VawakfUN9w5kbwpRjwiK59XgfDRviCxKJ9VKmPbLOoJbn6HcjsFtvs4VZphO+IGz4NM4g59ZKHWeYqY1jQ1wL68Eb7na0VvXg3E0V+QNx4Rsm2PdgL42OsG6zkC643bvxPnyB1rsy4wfCj8aPPDmX1gwO/MA7T+MOk9RaepwEX4hfWPJx/6EwrNZqcCaA5+gHWh4e4SNrm3XjmH3wa+M6zVTVTLMf54GwYa0LfuNXIgAT75f7uzCCH0fnKwcTLYcEgGtXgifhQBQwH4zdAwg+AgEj6GEYpuoknky8O2fVTGsuEFV/QKUsyYOmMEcjMAhlyeyr4Q1dMwFCFhEn86EYCjp2+euOkSXDypjx5Dp1iGTE7DEQniDSNc7sTwIkpHviP+UfbJwh+oK7LY4AAAAASUVORK5CYII=";function vt(){const a=ae(),[s,n]=t.useState(""),[i,o]=t.useState(""),[g,h]=t.useState(!1),{search:m}=es(),c=new URLSearchParams(m).get("redirect"),d=c||"/",x=Q(b=>b.userSignin),{userInfo:p,loading:l,error:u}=x,r=ce(),v=b=>{b.preventDefault(),r(Ha(s,i))};return t.useEffect(()=>{p&&a(d)},[a,d,p]),t.useEffect(()=>{if(u){const b=setTimeout(()=>{r({type:gs})},4e3);return()=>clearTimeout(b)}},[r,u]),e.jsx("div",{className:"signin-container",children:e.jsxs("form",{className:"signin-form",onSubmit:v,children:[e.jsx("img",{src:ne,alt:"Logo",className:"signin-logo"}),e.jsx("h2",{children:"Iniciar Sesi贸n"}),e.jsxs("div",{className:"input-group",children:[e.jsx(Se,{className:"input-icon"}),e.jsx("input",{type:"email",placeholder:"Ingrese su Email",required:!0,value:s,onChange:b=>n(b.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(ge,{className:"input-icon"}),e.jsx("input",{type:g?"text":"password",placeholder:"Ingrese su Clave",required:!0,value:i,onChange:b=>o(b.target.value)}),e.jsx("button",{type:"button",className:"password-toggle",onClick:()=>h(!g),children:g?e.jsx(je,{}):e.jsx(le,{})})]}),u&&e.jsx("p",{className:"signin-error",children:u}),e.jsx("div",{className:"form-actions",children:e.jsxs("button",{type:"submit",className:"signin-button",disabled:l,children:[l?e.jsx("div",{className:"spinner"}):e.jsx(qe,{}),e.jsx("span",{children:l?"Verificando...":"Entrar"})]})}),e.jsx("div",{className:"signin-footer",children:e.jsx(z,{to:`/register?redirect=${d}`,children:"Crear Cuenta"})})]})})}function Rt(){const a=ae(),[s,n]=t.useState(""),[i,o]=t.useState(""),[g,h]=t.useState(""),[m,c]=t.useState(""),[d,x]=t.useState(""),[p,l]=t.useState(""),[u,r]=t.useState(""),[v,b]=t.useState(!1),[f,E]=t.useState(!1),[I,N]=t.useState(null),{search:A}=es(),k=new URLSearchParams(A).get("redirect"),U=k||"/",M=Q(j=>j.userRegister),{userInfo:F,loading:R,error:P}=M,S=ce(),D=j=>{j.preventDefault(),p!==u?N("Las contrase帽as no coinciden"):(N(null),S(Ya(s,m,i,g,p,d)))};return t.useEffect(()=>{F&&a(U)},[a,U,F]),t.useEffect(()=>{if(P){const j=setTimeout(()=>{S({type:ka})},4e3);return()=>clearTimeout(j)}},[S,P]),e.jsx("div",{className:"signin-container",children:e.jsxs("form",{className:"signin-form",onSubmit:D,style:{gap:"1rem"},children:[e.jsx("img",{src:ne,alt:"Logo",className:"signin-logo"}),e.jsx("h2",{children:"Crear Cuenta"}),e.jsxs("div",{className:"input-group",children:[e.jsx(Z,{className:"input-icon"}),e.jsx("input",{type:"text",placeholder:"Nombre",required:!0,value:s,onChange:j=>n(j.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(Z,{className:"input-icon"}),e.jsx("input",{type:"text",placeholder:"Apellido",required:!0,value:i,onChange:j=>o(j.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(Se,{className:"input-icon"}),e.jsx("input",{type:"email",placeholder:"Email",required:!0,value:m,onChange:j=>c(j.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(ge,{className:"input-icon"}),e.jsx("input",{type:v?"text":"password",placeholder:"Clave",required:!0,value:p,onChange:j=>l(j.target.value)}),e.jsx("button",{type:"button",className:"password-toggle",onClick:()=>b(!v),children:v?e.jsx(je,{}):e.jsx(le,{})})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(ge,{className:"input-icon"}),e.jsx("input",{type:f?"text":"password",placeholder:"Confirmar Clave",required:!0,value:u,onChange:j=>r(j.target.value)}),e.jsx("button",{type:"button",className:"password-toggle",onClick:()=>E(!f),children:f?e.jsx(je,{}):e.jsx(le,{})})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(as,{className:"input-icon"}),e.jsx("input",{type:"text",placeholder:"C茅dula",required:!0,value:g,onChange:j=>h(j.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(De,{className:"input-icon"}),e.jsx("input",{type:"text",placeholder:"Tel茅fono",required:!0,value:d,onChange:j=>x(j.target.value)})]}),(P||I)&&e.jsx("p",{className:"signin-error",children:P||I}),e.jsx("div",{className:"form-actions",children:e.jsxs("button",{type:"submit",className:"signin-button",disabled:R,children:[R?e.jsx("div",{className:"spinner"}):e.jsx(qe,{}),e.jsx("span",{children:R?"Registrando...":"Registrar"})]})}),e.jsxs("div",{className:"signin-footer",children:[e.jsx("span",{children:"驴Ya tienes una cuenta? "}),e.jsx(z,{to:`/signin?redirect=${U}`,children:"Inicia Sesi贸n"})]})]})})}function bt(){const[a,s]=t.useState(""),[n,i]=t.useState(""),[o,g]=t.useState(""),[h,m]=t.useState(""),[c,d]=t.useState(""),[x,p]=t.useState(""),[l,u]=t.useState(""),[r,v]=t.useState(!1),[b,f]=t.useState(!1),[E,I]=t.useState(null),N=Q(_=>_.userSignin),{userInfo:A}=N,k=Q(_=>_.userDetails),{loading:U,error:M,user:F}=k,R=Q(_=>_.userUpdateProfile),{success:P,error:S,loading:D}=R,j=ce();t.useEffect(()=>{F?(s(F.nombre||" "),i(F.email||" "),d(F.apellido||" "),p(F.cedula||" "),u(F.telefono||" ")):(j({type:pe}),j(Xa(A._id)))},[j,A._id,F,P]);const O=_=>{_.preventDefault(),o!==h?I("Las contrase帽as no coinciden"):(I(null),j(Wa({userId:F._id,nombre:a,email:n,password:o,apellido:c,cedula:x,telefono:l})))};return t.useEffect(()=>{P&&(T.fire({title:"Datos Actualizado con Exito!",text:"Editar Perfil",imageUrl:ne,imageWidth:70,imageHeight:70,imageAlt:"logo"}),j({type:pe}))},[j,P]),t.useEffect(()=>{S&&(T.fire({title:"error",text:"Editar Perfil",imageUrl:ne,imageWidth:70,imageHeight:70,imageAlt:"logo"}),j({type:pe}))},[j,S]),t.useEffect(()=>{M&&(T.fire("Ocurrio un Error al Actualizar!","",M),j({type:pe}))},[j,M]),e.jsx("div",{className:"signin-container",children:e.jsxs("form",{className:"signin-form",onSubmit:O,style:{gap:"1rem"},children:[e.jsx("img",{src:ne,alt:"Logo",className:"signin-logo"}),e.jsx("h2",{children:"Perfil de Usuario"}),U?e.jsx("p",{children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"input-group",children:[e.jsx(Z,{className:"input-icon"}),e.jsx("input",{id:"nombre",type:"text",placeholder:"Nombre",value:a,onChange:_=>s(_.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(Z,{className:"input-icon"}),e.jsx("input",{id:"apellido",type:"text",placeholder:"Apellido",value:c,onChange:_=>d(_.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(Se,{className:"input-icon"}),e.jsx("input",{id:"email",type:"email",placeholder:"Email",value:n,onChange:_=>i(_.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(ge,{className:"input-icon"}),e.jsx("input",{id:"password",type:r?"text":"password",placeholder:"Nueva clave (opcional)",onChange:_=>g(_.target.value)}),e.jsx("button",{type:"button",className:"password-toggle",onClick:()=>v(!r),children:r?e.jsx(je,{}):e.jsx(le,{})})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(ge,{className:"input-icon"}),e.jsx("input",{id:"confirmPassword",type:b?"text":"password",placeholder:"Confirmar nueva clave",onChange:_=>m(_.target.value)}),e.jsx("button",{type:"button",className:"password-toggle",onClick:()=>f(!b),children:b?e.jsx(je,{}):e.jsx(le,{})})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(as,{className:"input-icon"}),e.jsx("input",{id:"cedula",type:"text",placeholder:"C茅dula",value:x,onChange:_=>p(_.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(De,{className:"input-icon"}),e.jsx("input",{id:"telefono",type:"text",placeholder:"Tel茅fono",value:l,onChange:_=>u(_.target.value)})]}),(S||E)&&e.jsx("p",{className:"signin-error",children:S||E}),e.jsx("div",{className:"form-actions",children:e.jsxs("button",{type:"submit",className:"signin-button",disabled:D,children:[D?e.jsx("div",{className:"spinner"}):e.jsx(Oe,{}),e.jsx("span",{children:D?"Actualizando...":"Actualizar Perfil"})]})})]})]})})}const We=({label:a,value:s,icon:n,isError:i})=>{const o=i?"No disponible":`Bs. ${Number(s).toLocaleString("es-VE",{minimumFractionDigits:2,maximumFractionDigits:2})}`;return e.jsxs("div",{className:"cambio-card",children:[n,e.jsxs("span",{className:"cambio-label",children:[a,":"]}),e.jsx("span",{className:`cambio-value ${i?"error":""}`,children:o})]})},Ps=()=>{const{data:a,isError:s,isLoading:n}=Os({},{pollingInterval:3e5});if(n)return null;const i=[e.jsx(We,{label:"BCV",value:a==null?void 0:a.cambiobcv,icon:e.jsx(aa,{size:14}),isError:s||!(a!=null&&a.cambiobcv)},"bcv"),e.jsx(We,{label:"Euro",value:a==null?void 0:a.euro,icon:e.jsx(ra,{size:14}),isError:s||!(a!=null&&a.euro)},"euro")];return e.jsx("div",{className:"cambio-marquee-container",children:e.jsxs("div",{className:"cambio-marquee-content",children:[i,i.map(o=>ye.cloneElement(o,{"aria-hidden":!0}))]})})},Tt=[{to:"/facturacion",icon:e.jsx(na,{}),label:"Venta Detal",isPrimary:!0},{to:"/enconstruccion",icon:e.jsx(ta,{}),label:"Venta Mayor"},{to:"/verpedidos",icon:e.jsx(oa,{}),label:"Lista de Ventas"},{to:"/verproductos",icon:e.jsx(rs,{}),label:"Productos"},{to:"/crearproducto",icon:e.jsx(ia,{}),label:"Crear Producto"},{to:"/reporteclientes",icon:e.jsx(la,{}),label:"Clientes"}],yt=[{to:"/enconstruccion",icon:e.jsx(ca,{}),label:"Dashboard"},{to:"/enconstruccion",icon:e.jsx(da,{}),label:"Cuadre de Caja"},{to:"/enconstruccion",icon:e.jsx(ua,{}),label:"Gastos"}],It=({to:a,icon:s,label:n,isPrimary:i,isExternal:o,children:g})=>{const h=`home-card ${i?"primary":""}`,m=e.jsxs(e.Fragment,{children:[s,g,e.jsx("span",{children:n}),o&&e.jsx(ma,{className:"external-link-icon"})]});return o?e.jsx("a",{href:a,rel:"noopener noreferrer",target:"_blank",className:h,children:m}):e.jsx(z,{to:a,className:h,children:m})},Je=({title:a,cards:s})=>e.jsxs("section",{className:"dashboard-section",children:[e.jsx("h2",{className:"section-title",children:a}),e.jsx("div",{className:"section-grid",children:s.map(n=>e.jsx(It,{...n},n.label))})]});function _t(){const a=Q(n=>n.userSignin),{userInfo:s}=a;return s?e.jsxs(e.Fragment,{children:[e.jsx(Ps,{}),e.jsxs("div",{className:"dashboard-container",children:[e.jsx(Je,{title:"Ventas e Inventarios",cards:Tt}),e.jsx(Je,{title:"Herramientas Administrativas",cards:yt})]})]}):e.jsxs("div",{className:"not-userinfo",children:[e.jsx("img",{src:Ke,alt:"fachada"}),";"]})}function te(a){return e.jsxs("div",{className:"flx jcenter font-1",children:[e.jsx("div",{className:a.tipo==="mini"?"loader mini":"loader"}),e.jsx("span",{children:a.txt})]})}function At({currentPage:a,totalPages:s,onPageChange:n}){const i=()=>{a>1&&n(a-1)},o=()=>{a<s&&n(a+1)};return e.jsx("div",{className:"tankstack-pagination-container",children:e.jsxs("div",{className:"tankstack-pagination-botonera",children:[e.jsx("button",{onClick:i,disabled:a===1,children:"Anterior"}),e.jsxs("span",{children:["P谩gina ",a," de ",s]}),e.jsx("button",{onClick:o,disabled:a===s,children:"Siguiente"})]})})}function Dt(){const a=ae(),{data:s,isLoading:n,isError:i,error:o}=bs(),[g,{isLoading:h}]=lr(),[m,c]=t.useState(""),[d,x]=t.useState(1),p=12,l=t.useMemo(()=>s?s.filter(f=>f.nombre.toLowerCase().includes(m.toLowerCase())||f.rif.toLowerCase().includes(m.toLowerCase())):[],[s,m]),u=Math.ceil(l.length/p),r=t.useMemo(()=>{const f=(d-1)*p;return l.slice(f,f+p)},[l,d,p]),v=f=>{c(f.target.value),x(1)},b=(f,E)=>{T.fire({title:`驴Est谩s seguro de eliminar a ${E}?`,text:"Esta acci贸n no se puede deshacer.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"S铆, eliminar",cancelButtonText:"Cancelar"}).then(async I=>{if(I.isConfirmed)try{await g(f).unwrap(),T.fire("Eliminado","El cliente ha sido eliminado.","success")}catch{T.fire("Error","No se pudo eliminar el cliente.","error")}})};return n?e.jsx(te,{txt:"Cargando clientes..."}):i?e.jsxs("div",{className:"error-message",children:["Error al cargar los clientes: ",o.message]}):e.jsxs("div",{className:"client-report-container",children:[e.jsxs("div",{className:"client-report-header",children:[e.jsx("h2",{className:"section-title",children:"Directorio de Clientes"}),e.jsxs("div",{className:"client-report-actions",children:[e.jsxs("div",{className:"search-box",children:[e.jsx(ns,{className:"search-icon"}),e.jsx("input",{type:"text",placeholder:"Buscar por nombre o RIF...",value:m,onChange:v})]}),e.jsxs("button",{className:"add-client-btn",onClick:()=>a("/cliente/nuevo"),children:[e.jsx(Ie,{size:20}),e.jsx("span",{children:"Crear Cliente"})]})]})]}),e.jsx("div",{className:"client-grid",children:r.map((f,E)=>e.jsxs("div",{className:"client-card",style:{animationDelay:`${E*40}ms`},children:[e.jsxs("div",{className:"client-card-header",children:[e.jsx("div",{className:"client-avatar",children:e.jsx(Z,{size:24})}),e.jsxs("div",{className:"client-info",children:[e.jsx("h3",{className:"client-name",children:f.nombre}),e.jsxs("p",{className:"client-rif",children:["RIF/CI: ",f.rif]})]})]}),e.jsxs("div",{className:"client-card-body",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Tel茅fono:"})," ",f.celular||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Direcci贸n:"})," ",f.direccion||"N/A"]})]}),e.jsxs("div",{className:"client-card-footer",children:[e.jsxs("span",{className:"client-date",children:["Creado: ",J(f.timestamp).format("DD/MM/YYYY")]}),e.jsxs("div",{className:"client-card-actions",children:[e.jsx("button",{className:"icon-btn edit-btn",onClick:()=>a(`/cliente/${f._id}/edit`),title:"Editar Cliente",children:e.jsx(ts,{size:18})}),e.jsx("button",{className:"icon-btn delete-btn",onClick:()=>b(f._id,f.nombre),disabled:h,title:"Eliminar Cliente",children:e.jsx(Le,{size:18})})]})]})]},f._id))}),l.length===0&&!n&&e.jsxs("div",{className:"empty-state",children:[e.jsx(Z,{size:48}),e.jsx("p",{children:m?"No se encontraron clientes que coincidan con la b煤squeda.":"No hay clientes registrados."})]}),u>1&&e.jsx(At,{currentPage:d,totalPages:u,onPageChange:x})]})}const Us=["","Sin Marca","Otro","Puma","Salomon","Nike","Adidas","Vans","Generico","Louis Vuitton","D&G","Valentino","Prada","Fendi","Phillip Plain","Burberry","Converse","Alexander mcQueen","Balenciaga","Birkenstock","Dior","New Balance","Asics","Polo","Lacoste","Boss","Enporio","Gant","Tommy Hilfiger","Fila","Columbia","Gorila","Under Armon","Calvin Klein","DQ2","Jordan","Gucci","Lagerfeld","Monclear","Palm","Versace","X OFF","Zoom"],ws=["","CALZADO","TEXTILES","ACCESORIOS","UTENSILIOS","JUGUETES","OTROS"],Fs=["","Blanco","Negro","Gris","Azul","Verde","Amarillo","Rojo","Rosado","Morado","Vinotinto","Celeste","Naranja","Fucsia","Marron","Beige","Dorado","Plateado","Varios","Otro"],ks=["","Archlight","Arizona Eva","Awaiking","Drawstring","Greca","Ikonik","One","Oversized","Portofino","Ramsey","Rivoli","Rocksrunner","Roma","Runnning","San Bartolo","Trainer","VL7N","White Tigreca","Zero","Airforce 1","Jordan 1","Retro 1","Retro 2","Retro 3","Retro 4","Retro 5","Retro 6","Retro 11","AirMax","Bad Bunny","Benito","Superstar","Nike-SB","Otro","Stay Loyal 2","Retro 12","Jordan 13","Sin Modelo","Generico"],Ms=["","Alta Gama","Gorra","Casual","Deportivo","Sandalias","Camisa","Franela","Short","Mono","Chemise","Sweater","Otro"],Gs=["","Dama","Caballero","Ni帽o","Unisex","N/A"],Ot=["","INSTAGRAM","TIK-TOK","FACEBOOK","REFERIDO","CUENTA-PROPIA","RECOMENDADO","EMISORA-RADIO","TELEVISION","PUBLICIDAD","FLYERS"],Vs=[{value:"T20",label:"20"},{value:"T21",label:"21"},{value:"T22",label:"22"},{value:"T23",label:"23"},{value:"T24",label:"24"},{value:"T25",label:"25"},{value:"T26",label:"26"},{value:"T27",label:"27"},{value:"T28",label:"28"},{value:"T29",label:"29"},{value:"T30",label:"30"},{value:"T31",label:"31"},{value:"T32",label:"32"},{value:"T33",label:"33"},{value:"T34",label:"34"},{value:"T35",label:"35"},{value:"T36",label:"36"},{value:"T37",label:"37"},{value:"T38",label:"38"},{value:"T39",label:"39"},{value:"T40",label:"40"},{value:"T41",label:"41"},{value:"T42",label:"42"},{value:"T43",label:"43"},{value:"T44",label:"44"},{value:"T45",label:"45"},{value:"T46",label:"46"},{value:"T47",label:"47"},{value:"TXS",label:"XS"},{value:"TSS",label:"SS"},{value:"TS",label:"S"},{value:"TM",label:"M"},{value:"TL",label:"L"},{value:"TXL",label:"XL"},{value:"T2XL",label:"2XL"},{value:"T3XL",label:"3XL"},{value:"T4XL",label:"4XL"},{value:"T5XL",label:"5XL"},{value:"T6XL",label:"6XL"},{value:"TU",label:"U"},{value:"TG",label:"G"},{value:"ITEM",label:"ITEM"}];function Lt(a){const s=Ee(),n=ae(),{id:i}=s,{data:o,isLoading:g,isError:h}=ar(i),[m,{isLoading:c,isSuccess:d,isError:x,error:p}]=nr(),[l,u]=t.useState(null),[r,v]=t.useState(""),[b,f]=t.useState(""),[E,I]=t.useState(null),[N,A]=t.useState(!1),[k,U]=t.useState(0),M=Vs.flatMap(C=>C.label),F=t.useMemo(()=>[...Us].sort(),[]),R=t.useMemo(()=>[...ks].sort(),[]),P=t.useMemo(()=>[...Ms].sort(),[]),S=t.useMemo(()=>[...Fs].sort(),[]),D=t.useMemo(()=>l?Object.values(l.tallas).reduce((C,G)=>C+(Number(G)||0),0):0,[l]);t.useEffect(()=>{if(o){const C=Array.isArray(o)?o[0]:o;u({codigo:C.codigo||"",categoria:C.categoria||"CALZADO",marca:C.marca||"",modelo:C.modelo||"",color:C.color||"",genero:C.genero||"",preciousd:C.preciousd||"",tipo:C.tipo||"",tallas:C.tallas||{}}),v(C.imageurl||""),I(C.imageurl||null)}},[o]),t.useEffect(()=>{if(!b)return;(()=>{A(!0),U(0);const G=new FormData;G.append("file",b),G.append("upload_preset","ronald_preset"),G.append("cloud_name","ronaldimg"),G.append("folder","productos"),fetch("https://api.cloudinary.com/v1_1/ronaldimg/image/upload",{method:"post",body:G}).then($=>$.json()).then($=>{U(100),A(!1),v($.secure_url)}).catch($=>{A(!1),T.fire("Error de Carga","No se pudo subir la imagen a Cloudinary.","error"),console.log($)})})()},[b]),t.useEffect(()=>{var C;x&&T.fire({title:"Error al Actualizar",text:((C=p==null?void 0:p.data)==null?void 0:C.message)||"Ocurri贸 un error.",icon:"error"}),d&&T.fire({title:"Producto Actualizado!",text:"La informaci贸n del producto se ha guardado correctamente.",icon:"success"}).then(()=>{n("/verproductos")})},[d,x,p,n]);const j=async C=>{C.preventDefault();try{await m({_id:i,...l,existencia:D,imageurl:r}).unwrap()}catch(G){console.error("Failed to update product:",G)}},O=C=>{const{name:G,value:$}=C.target;u(ee=>({...ee,[G]:$}))},_=C=>{const{name:G,value:$}=C.target,ee=$===""?0:Number($);u(se=>{const oe={...se.tallas,[G]:ee};return ee===0&&delete oe[G],{...se,tallas:oe}})};return g?e.jsx("div",{className:"loading",children:"Cargando datos del producto..."}):h?e.jsx("div",{className:"error",children:"Error al cargar la informaci贸n del producto."}):l?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flx column pad-0 jcenter",children:[e.jsxs("h2",{className:"editar pad-05",children:["EDITAR PRODUCTO ",l.codigo]}),e.jsxs("form",{className:"signin-form",onSubmit:j,style:{maxWidth:"700px",gap:"1.5rem"},children:[e.jsxs("div",{className:"form-section w100p",children:[e.jsx("h3",{children:"Informaci贸n Principal"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"C贸digo"}),e.jsx("input",{type:"text",name:"codigo",required:!0,placeholder:"CODIGO",value:l.codigo.toUpperCase(),onChange:O,disabled:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Precio (USD)"}),e.jsx("input",{type:"number",name:"preciousd",required:!0,placeholder:"Ej: 25.00",value:l.preciousd,onChange:O})]})]})]}),e.jsxs("div",{className:"form-section w100p",children:[e.jsx("h3",{children:"Clasificaci贸n"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Categor铆a"}),e.jsxs("select",{name:"categoria",value:l.categoria,onChange:O,required:!0,children:[e.jsx("option",{value:"",children:"Seleccione..."}),ws.map(C=>e.jsx("option",{value:C,children:C},C))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"G茅nero"}),e.jsxs("select",{name:"genero",value:l.genero,onChange:O,required:!0,children:[e.jsx("option",{value:"",children:"Seleccione..."}),Gs.map(C=>e.jsx("option",{value:C,children:C},C))]})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Marca"}),e.jsxs("select",{name:"marca",value:l.marca,onChange:O,required:!0,children:[e.jsx("option",{value:"",children:"Seleccione..."}),F.map(C=>e.jsx("option",{value:C,children:C},C))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Modelo"}),e.jsxs("select",{name:"modelo",value:l.modelo,onChange:O,required:!0,children:[e.jsx("option",{value:"",children:"Seleccione..."}),R.map(C=>e.jsx("option",{value:C,children:C},C))]})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Tipo"}),e.jsxs("select",{name:"tipo",value:l.tipo,onChange:O,required:!0,children:[e.jsx("option",{value:"",children:"Seleccione..."}),P.map(C=>e.jsx("option",{value:C,children:C},C))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Color"}),e.jsxs("select",{name:"color",value:l.color,onChange:O,required:!0,children:[e.jsx("option",{value:"",children:"Seleccione..."}),S.map(C=>e.jsx("option",{value:C,children:C},C))]})]})]})]}),e.jsx("div",{className:"form-section w100p",children:e.jsxs("details",{children:[e.jsx("summary",{className:"mb-1",children:e.jsxs("span",{children:["Existencia por Talla (",D," unidades)"]})}),e.jsx("div",{className:"flx jcenter wrap pad-0",style:{gap:"0.5rem"},children:M.map(C=>l.categoria==="CALZADO"&&(l.genero==="Dama"&&(Number(C)<35||Number(C)>40||isNaN(C))||l.genero==="Caballero"&&(Number(C)<40||isNaN(C))||l.genero==="Ni帽o"&&(Number(C)>35||isNaN(C)))?null:e.jsxs("div",{className:`edit-span-tallas ${l.tallas[C]?"":"inactive"}`,children:[e.jsx("span",{children:C}),e.jsx("input",{type:"number",value:l.tallas[C]||"",className:"input-talla",name:C,onChange:_,placeholder:"0"})]},C))})]})}),e.jsxs("div",{className:"form-section w100p",children:[e.jsx("h3",{children:"Imagen del Producto"}),e.jsxs("div",{className:"edit-image-container mb-1 mtop-1",children:[e.jsxs("div",{className:"input-file-container",onClick:()=>document.querySelector(".input-field").click(),children:[e.jsx("input",{type:"file",accept:"image/*",className:"input-field",hidden:!0,onChange:({target:{files:C}})=>{C&&C[0]&&new ds(C[0],{quality:.6,success:G=>{I(URL.createObjectURL(G)),f(G)}})}}),E?e.jsx("img",{src:E,alt:"Vista previa"}):e.jsxs("div",{className:"upload-icon",children:[e.jsx(os,{size:48,color:"#888"}),e.jsx("p",{children:"Selecciona una imagen"})]})]}),N&&e.jsx("div",{className:"upload-img-info",children:k<100?e.jsxs(e.Fragment,{children:[e.jsx($e,{className:"animate-spin"}),e.jsx("span",{children:"Subiendo..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Qe,{color:"green"}),e.jsx("span",{children:"Imagen Cargada"})]})}),e.jsx("p",{className:"font-x centrado mtop-05",children:"Click en el recuadro para seleccionar o cambiar la imagen"})]})]}),e.jsx("div",{className:"form-actions w100p",children:e.jsxs("button",{type:"submit",className:"signin-button",disabled:c||N,children:[c||N?e.jsx("div",{className:"spinner"}):e.jsx(Oe,{}),e.jsx("span",{children:c?"Actualizando...":"Actualizar Producto"})]})})]})]})}):null}const Pt={nombre:"",email:"",rif:"",direccion:"",celular:"",canal:""};function Ut(){const a=ae(),s=Ee(),{id:n}=s,i=!!n,[o,g]=t.useState(Pt),[h,m]=t.useState({}),{data:c,isLoading:d}=ir(n,{skip:!i}),[x,{isLoading:p}]=Ts(),[l,{isLoading:u}]=cr();t.useEffect(()=>{i&&c&&g({nombre:c.nombre||"",email:c.email||"",rif:c.rif||"",direccion:c.direccion||"",celular:c.celular||"",canal:c.canal||""})},[c,i]);const r=E=>{const{name:I,value:N}=E.target;g(A=>({...A,[I]:N})),h[I]&&m(A=>({...A,[I]:null}))},v=()=>{const E={};return o.nombre||(E.nombre="El nombre es obligatorio."),o.rif?/^[VJGjvgEPe]\d{6,9}$/i.test(o.rif)||(E.rif="Formato de RIF/CI inv谩lido (Ej: V-12345678, J-123456789)."):E.rif="El RIF/CI es obligatorio.",o.direccion||(E.direccion="La direcci贸n es obligatoria."),o.email&&!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(o.email)&&(E.email="Direcci贸n de email inv谩lida."),m(E),Object.keys(E).length===0},b=async E=>{var I;if(E.preventDefault(),!!v())try{i?(await l({id:n,...o}).unwrap(),T.fire("隆xito!","Cliente actualizado correctamente.","success")):(await x(o).unwrap(),T.fire("隆xito!","Cliente registrado correctamente.","success")),a("/reporteclientes")}catch(N){T.fire("Error",((I=N.data)==null?void 0:I.message)||"No se pudo completar la operaci贸n.","error")}};if(d)return e.jsx(te,{txt:"Cargando datos del cliente..."});const f=(E,I,N,A={},k="text")=>e.jsxs("div",{className:`input-group ${A.fullWidth?"full-width":""}`,children:[e.jsx("label",{htmlFor:E,children:I}),e.jsxs("div",{className:"input-with-icon",children:[N,e.jsx("input",{id:E,name:E,type:k,value:o[E],onChange:r,...A})]}),h[E]&&e.jsx("span",{className:"error-message",children:h[E]})]});return e.jsx("div",{className:"form-container client-form",children:e.jsxs("form",{onSubmit:b,children:[e.jsxs("div",{className:"form-header",children:[e.jsx("h2",{children:i?"Editar Cliente":"Registrar Nuevo Cliente"}),e.jsx(z,{to:"/reporteclientes",className:"back-link",children:"Volver al Directorio"})]}),e.jsxs("div",{className:"form-body",children:[f("nombre","Nombre o Raz贸n Social",e.jsx(Z,{}),{required:!0,fullWidth:!0}),f("rif","RIF / C茅dula",e.jsx(pa,{}),{required:!0,placeholder:"Ej: V12345678"}),f("celular","Tel茅fono Celular",e.jsx(De,{})),f("direccion","Direcci贸n Fiscal",e.jsx(is,{}),{required:!0,fullWidth:!0}),f("email","Correo Electr贸nico",e.jsx(Se,{}),{type:"email",fullWidth:!0}),e.jsxs("div",{className:"input-group full-width",children:[e.jsx("label",{htmlFor:"canal",children:"Canal de Difusi贸n"}),e.jsxs("div",{className:"input-with-icon",children:[e.jsx(ha,{}),e.jsxs("select",{id:"canal",name:"canal",value:o.canal,onChange:r,children:[e.jsx("option",{value:"",children:"-- Seleccione un canal --"}),Ot.map(E=>e.jsx("option",{value:E,children:E},E))]})]})]})]}),e.jsx("div",{className:"form-actions",children:e.jsx("button",{type:"submit",className:"submit-button",disabled:p||u,children:p||u?"Guardando...":i?"Actualizar Cliente":"Crear Cliente"})})]})})}function H({children:a,text:s}){return e.jsxs("div",{className:"tooltip",children:[a,e.jsx("span",{className:"tooltip__box",children:s})]})}function wt({data:a,columns:s}){const[n,i]=t.useState([]),[o,g]=t.useState([]),[h,m]=t.useState({pageIndex:0,pageSize:20}),[c,d]=ye.useState(""),[x,p]=ye.useState([]),l=Da({data:a,columns:s,state:{grouping:n,sorting:o,pagination:h,columnFilters:x,globalFilter:c},onColumnFiltersChange:p,onGlobalFilterChange:d,onGroupingChange:i,getExpandedRowModel:Fa(),getGroupedRowModel:wa(),getCoreRowModel:Ua(),getPaginationRowModel:Pa(),getFilteredRowModel:La(),getSortedRowModel:Oa(),onSortingChange:g,onPaginationChange:m});return e.jsxs("div",{className:"tankstack-table-container",children:[e.jsxs("div",{className:"flx pad-0 jcenter",children:[e.jsx("input",{type:"text",className:"mr",value:c,placeholder:"Buscar",onChange:u=>d(u.target.value)}),e.jsxs("span",{className:"font-x negrita",children:["Pagina ",l.getState().pagination.pageIndex+1," de ",l.getPageCount()]})]}),e.jsxs("div",{children:[e.jsxs("table",{className:"styled-table",children:[e.jsx("thead",{children:l.getHeaderGroups().map(u=>e.jsx("tr",{children:u.headers.map(r=>e.jsx("th",{colSpan:r.colSpan,children:r.isPlaceholder?null:e.jsxs("div",{className:"flx pad-0 gap05 jcenter",children:[r.column.getCanGroup()?e.jsx(H,{text:"agrupar",children:e.jsx("button",{onClick:r.column.getToggleGroupingHandler(),style:{cursor:"pointer",backgroundColor:"transparent",border:"none"},className:r.column.getIsGrouped()?"th-ungroup-btn":"th-group-btn",children:r.column.getIsGrouped()?e.jsx(ls,{style:{color:"grey"}}):e.jsx(xa,{style:{color:"grey"}})})}):null," ",he(r.column.columnDef.header,r.getContext()),e.jsx(H,{text:"ordenar",children:e.jsx("button",{style:{cursor:"pointer",backgroundColor:"transparent",border:"none",minWidth:"20px",padding:0,margin:"0"},onClick:r.column.getToggleSortingHandler(),children:{asc:" ",desc:" "}[r.column.getIsSorted()]??e.jsx(ga,{})})})]})},r.id))},u.id))}),e.jsx("tbody",{children:l.getRowModel().rows.map(u=>e.jsx("tr",{children:u.getVisibleCells().map((r,v)=>e.jsx("td",{style:{background:r.getIsGrouped()?"#dedede":r.getIsAggregated()||r.getIsPlaceholder()?"#bebdbd":"white"},children:r.getIsGrouped()?e.jsx(e.Fragment,{children:e.jsxs("button",{onClick:u.getToggleExpandedHandler(),style:{cursor:u.getCanExpand()?"pointer":"normal"},className:"td-group-btn",children:[u.getIsExpanded()?e.jsx(ja,{}):e.jsx(Ie,{className:"td-group-icon"})," ",he(r.column.columnDef.cell,r.getContext())," (",u.subRows.length,")"]})}):r.getIsAggregated()?he(r.column.columnDef.aggregatedCell??r.column.columnDef.cell,r.getContext()):r.getIsPlaceholder()?null:he(r.column.columnDef.cell,r.getContext())},v))},u.id))}),e.jsx("tfoot",{children:l.getFooterGroups().map(u=>e.jsx("tr",{children:u.headers.map(r=>e.jsx("th",{children:he(r.column.columnDef.footer,r.getContext())},r.id))},u.id))})]}),e.jsx("div",{className:"tankstack-pagination-container",children:e.jsxs("div",{className:"tankstack-pagination-botonera",children:[e.jsx("button",{onClick:()=>l.setPageIndex(0),disabled:!l.getCanPreviousPage(),children:"primero"}),e.jsx("button",{onClick:()=>l.previousPage(),disabled:!l.getCanPreviousPage(),children:"anterior"}),e.jsx("button",{onClick:()=>l.nextPage(),disabled:!l.getCanNextPage(),children:"siguiente"}),e.jsx("button",{onClick:()=>l.setPageIndex(l.getPageCount()-1),disabled:!l.getCanNextPage(),children:"ultimo"})]})})]})]})}function Ft(){const{data:a,isLoading:s}=Xe(),n=ae(),i=Q(x=>x.userSignin),{userInfo:o}=i,[g,{isLoading:h}]=tr(),m=x=>{if(!o.isAdmin)return T.fire({title:"Necesita Permisos de Administrador",text:"Editar Producto ",icon:"warning"}),"";n(`/product/${x}/edit`)},c=async(x,p)=>{var u;if(!o.isAdmin)return T.fire({title:"Necesita Permisos de Administrador",text:"Eliminar Producto",icon:"warning"});if((await T.fire({title:`驴Est谩s seguro de eliminar ${p}?`,text:"Esta acci贸n no se puede deshacer.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"S铆, eliminar",cancelButtonText:"Cancelar"})).isConfirmed)try{await g(x).unwrap(),T.fire("Eliminado",`El producto ${p} ha sido eliminado.`,"success")}catch(r){T.fire("Error",`No se pudo eliminar el producto. ${((u=r.data)==null?void 0:u.message)||""}`,"error")}},d=[{header:"Codigo",accessorKey:"codigo",enableGrouping:!1,cell:x=>{const{codigo:p,_id:l,nombre:u}=x.row.original;return e.jsxs("div",{className:"flx pad-0 column",children:[e.jsx("h3",{children:p}),e.jsxs("div",{className:"flx gap-1 bg-grey pad-05",children:[e.jsx(H,{text:"Editar",children:e.jsx(ts,{size:20,onClick:()=>m(l)})}),e.jsx(H,{text:"Conteo Rapido",children:e.jsx(Ea,{size:20,onClick:()=>n(`/conteorapido/${l}`)})}),e.jsx(H,{text:"Eliminar",children:e.jsx(Le,{size:20,onClick:()=>c(l,p),disabled:h})})]})]})},aggregationFn:"count"},{header:"Imagen",accessorKey:"imageurl",enableGrouping:!1,enableSorting:!0,cell:x=>e.jsx("img",{className:"table-img",src:x.getValue()||"./src/assets/logo.png",loading:"lazy"})},{header:"Precio",accessorKey:"preciousd",aggregatedCell:({getValue:x})=>Math.round(x()*100)/100,aggregationFn:"median",cell:x=>"$"+Number(x.getValue()).toFixed(2),footer:({table:x})=>x.getFilteredRowModel().rows.reduce((l,u)=>l+u.getValue("existencia")*u.getValue("preciousd"),0)},{header:"Categoria",accessorKey:"categoria"},{header:"Marca",accessorKey:"marca"},{header:"Modelo",accessorKey:"modelo"},{header:"Color",accessorKey:"color"},{header:"Genero",accessorKey:"genero"},{header:"Existencia",accessorKey:"existencia",footer:({table:x})=>"Unidades: "+x.getFilteredRowModel().rows.reduce((p,l)=>p+l.getValue("existencia"),0)},{header:"Tallas",accessorKey:"tallas",enableGrouping:!1,enableSorting:!1,cell:x=>{const{tallas:p}=x.row.original;if(p===void 0)return"";const l=Object.values(p).reduce((u,r)=>u+r,0);return p?l<=0?e.jsx("span",{className:"negrita",children:"No Disponible"}):e.jsx("div",{className:"flx column pad-0 font-x negrita azul-brand",children:e.jsx("div",{className:"flx jcenter pad-0 mtop-1",children:Object.keys(p).map((u,r)=>p[u]===0?"":e.jsxs("div",{className:"flx column astart pad-0 font-14",children:[e.jsx("p",{className:"centrado minw-20 negrita subrayado",children:u}),e.jsx("p",{className:"centrado minw-20 font-12 color-negro",children:p[u]})]},r))})}):""},footer:""}];return e.jsxs("div",{children:[e.jsxs("div",{className:"flx column jcenter mtop-1",children:[e.jsx("h2",{className:"centrado",children:"PRODUCTOS"}),e.jsx("p",{className:"negrita",children:"Almacen Principal"})]}),s?e.jsx(te,{txt:"Actualizando Productos"}):e.jsx("div",{children:a.length>0?e.jsx(wt,{data:a,columns:d}):""})]})}function kt(a,s){return a.setHours(a.getHours()-s),a}const Mt=()=>{const[a]=t.useState(kt(new Date,6)),[s,n]=t.useState(0),[i,o]=t.useState(""),[g,h]=t.useState(null),[m,c]=t.useState(""),[d,x]=t.useState("Contado"),[p,l]=t.useState([]),[u,r]=t.useState([]),[v,b]=t.useState(0),[f,E]=t.useState(0),[I,N]=t.useState(""),[A,k]=t.useState(!1),[U,M]=t.useState(!1),[F,R]=t.useState(!1),[P,S]=t.useState(!1),[D,j]=t.useState(!1),[O,_]=t.useState(!1),[C,G]=t.useState(null),$=ae(),{userInfo:ee}=Q(L=>L.userSignin),{data:se,isError:oe}=Os({}),{data:de}=As(),[we,{isLoading:Fe}]=St(),Y=t.useMemo(()=>p.reduce((L,w)=>L+w.precio*w.qty,0),[p]),re=t.useMemo(()=>Y*0,[Y]),K=t.useMemo(()=>Math.max(0,Y-v+re+Number(f)),[Y,v,re,f]),ue=t.useMemo(()=>u.reduce((L,w)=>L+w.montoUSD,0),[u]),ke=()=>{h(null),o(""),c(""),x("Contado"),l([]),r([]),b(0),E(0),N("")},ie=async()=>{if(s>0)return s;let L=0;if(se&&se.cambiobcv&&!oe)L=Number(se.cambiobcv);else{const{value:w}=await T.fire({title:"Tasa de Cambio BCV no disponible",text:"Por favor, ingrese la tasa de cambio del d铆a manualmente:",input:"number",inputPlaceholder:"Ej: 36.50",showCancelButton:!0,inputValidator:W=>!W||isNaN(W)||parseFloat(W)<=0&&"Debe ingresar un valor num茅rico positivo."});w&&(L=parseFloat(w))}return n(L),L},Me=async()=>{var L;if((d==="Donacion"||d==="Intercambio")&&!I.trim())return T.fire("Campo Requerido","El campo 'Memo / Notas' es obligatorio.","warning");if(d!=="Credito"&&Math.abs(K-ue).toFixed(2)!=="0.00")return T.fire("Monto Incompleto","El total pagado no coincide con el total de la orden.","warning");if(!s||s===0)return T.fire("Operaci贸n Cancelada","No se puede crear la orden sin una tasa de cambio v谩lida.","error");try{const{data:w}=await we({fecha:a,clienteInfo:g,orderItems:p,pago:u,totalItems:p.reduce((W,me)=>W+me.qty,0),subtotal:Y,descuento:v,delivery:f,totalVenta:K,cambioDia:s,condicion:d,vendedor:m,user:ee,memo:I,iva:re});ke(),$(`/print/order/${w.order._id}`)}catch(w){T.fire("Error al Crear la Orden",((L=w.data)==null?void 0:L.message)||w.error||"Ocurri贸 un error.","error")}},Ge=L=>{l(w=>[...w,L]),R(!1)},Ve=L=>{l(w=>w.filter((W,me)=>me!==L))},Be=L=>{let w=Number(L.target.value);w<0&&(w=0),w>Y&&(w=Y,T.fire("Atenci贸n","El descuento no puede ser mayor que el subtotal.","warning")),b(w)},y=L=>{const w=L.target.value;x(w),w==="Credito"?r([]):w==="Contado"&&K>0&&ue<K&&S(!0)},V=async()=>{await ie()>0?S(!0):T.fire("Acci贸n cancelada","Se requiere una tasa de cambio para gestionar los pagos.","info")},X=t.useCallback(L=>{r(L),S(!1),L.length>0&&T.fire("Guardado","M茅todos de pago actualizados.","success")},[]);return t.useEffect(()=>{(async()=>{K>0&&s===0&&await ie()})()},[K,s]),{fecha:a,cambioDia:s,rif:i,setRif:o,clienteInfo:g,setClienteInfo:h,vendedor:m,setVendedor:c,condicion:d,ordenItems:p,metodosPago:u,descuento:v,delivery:f,setDelivery:E,memo:I,setMemo:N,subtotal:Y,impuesto:re,totalOrden:K,totalPagado:ue,vendedores:de,isCreatingOrder:Fe,showClienteSearchModal:A,setShowClientSearchModal:k,showNewClientModal:U,setShowNewClientModal:M,showProductSearchModal:F,setShowProductSearchModal:R,showProductViewerModal:D,setShowProductViewerModal:j,showClientViewerModal:O,setShowClientViewerModal:_,showMetodoPagoModal:P,setShowMetodoPagoModal:S,imagenAmpliadaUrl:C,setImagenAmpliadaUrl:G,handleCondicionChange:y,handleDescuentoChange:Be,addItemToOrder:Ge,deleteItemFromOrder:Ve,setOrdenItems:l,handleOpenPagoModal:V,handleSavePagos:X,createOrderHandler:Me}},Bs=t.forwardRef(({onClientFound:a,onNewClient:s,onCancel:n},i)=>{const[o]=dr(),g=async()=>{try{const{value:h}=await T.fire({title:"RIF o Cedula",input:"text",inputPlaceholder:"Ejemplo: V999999999 - J999999999",showCancelButton:!0,confirmButtonText:"Buscar",cancelButtonText:"Cancelar",inputAttributes:{maxlength:10},inputValidator:m=>{if(!m)return"Debe ingresar Cedula o RIF";const c=m.trim().toUpperCase(),d=c.charAt(0),x=d==="J"||d==="G",p=d==="V"||d==="E";if(x){if(!/^[JG][0-9]{9}$/.test(c))return"Formato de RIF incorrecto. Debe ser J o G seguido de 9 d铆gitos."}else if(p){if(!/^[VE][0-9]{6,9}$/.test(c))return"Formato de C茅dula incorrecto. Debe ser V o E seguido de 6 a 8 d铆gitos."}else return"El identificador debe comenzar con V, E, J o G."}});if(h){const{data:m,error:c}=await o(h.toUpperCase());m&&T.fire({title:`${m.nombre+" - "+m.rif}`,icon:"success",confirmButtonText:"OK",showCancelButton:!0,cancelButtonText:"Cancelar"}).then(d=>{d.isConfirmed?a(m):n()}),c?T.fire({title:"Cliente No Encontrado",icon:"error",showCancelButton:!0,cancelButtonText:"Cancelar",confirmButtonText:"Agregar"}).then(d=>{d.isConfirmed?s(h.toUpperCase()):n()}):m||(console.error("Respuesta inesperada de la API: ni datos ni error."),T.fire("Error Inesperado","No se recibi贸 respuesta del servidor.","error"),n())}else n()}catch(h){T.fire({title:"Error",text:"Ocurri贸 un error durante la b煤squeda "+h,icon:"error",confirmButtonText:"OK"}),n()}};return t.useImperativeHandle(i,()=>({show:g})),null});function Gt({identificacion:a,onRegisterSuccess:s,onCancel:n}){const[i,{isLoading:o,isSuccess:g}]=Ts(),[h]=t.useState(a||""),[m,c]=t.useState({nombre:"",direccion:"",celular:"",email:"",canal:""}),[d,x]=t.useState({}),p=r=>{const{name:v,value:b,type:f,checked:E}=r.target;c(I=>({...I,[v]:f==="checkbox"?E:b})),d[v]&&x(I=>({...I,[v]:""}))},l=()=>{const r={};m.nombre.trim()||(r.nombre="El Nombre O Razon Social es requerido"),m.direccion.trim()||(r.direccion="La Direccion es requerida"),m.canal.trim()||(r.canal="El Canal de Divulgacion es requerido");const v=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return m.email&&!v.test(m.email)&&(r.email="Por favor ingrese una direccion de Email valida"),m.celular&&!/^\d{10,15}$/.test(m.celular.replace(/\D/g,""))&&(r.celular="Por favor ingrese su telefono en forma correcta"),x(r),Object.keys(r).length===0},u=async r=>{var v;if(r.preventDefault(),l())try{await i({...m,rif:h}).unwrap().then(b=>{T.fire("Agregado","Cliente registrado exitosamente","success"),c({nombre:"",direccion:"",email:"",celular:"",canal:""}),s(b)}).catch(b=>{T.fire("Error","Ocurrio un Error","error")})}catch(b){T.fire("Error",((v=b.data)==null?void 0:v.message)||"Failed to register client","error")}};return e.jsxs("div",{className:"form-container",children:[e.jsxs("div",{className:"modal-close-container",children:[e.jsx(Ye,{className:"close-icon light",onClick:n}),e.jsxs("p",{children:["RIF / CEDULA: ",h]})]}),e.jsxs("form",{onSubmit:u,className:"form",children:[e.jsxs("div",{className:"form-section",children:[e.jsx("h3",{children:"Registrar Cliente"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"nombre",children:"Nombre o Razon Social *"}),e.jsx("input",{type:"text",id:"nombre",name:"nombre",value:m.nombre,onChange:p,className:d.nombre?"error":"",placeholder:"Ingrese su Nombre o Razon Social"}),d.nombre&&e.jsx("span",{className:"error-message",children:d.nombre})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"direccion",children:"Direccion *"}),e.jsx("input",{type:"text",id:"direccion",name:"direccion",value:m.direccion,onChange:p,className:d.direccion?"error":"",placeholder:"Enter your last name"}),d.direccion&&e.jsx("span",{className:"error-message",children:d.direccion})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"celular",children:"Telefono"}),e.jsx("input",{type:"tel",id:"celular",name:"celular",value:m.celular,onChange:p,className:d.celular?"error":"",placeholder:"Ej: 0412-999-9999"}),d.celular&&e.jsx("span",{className:"error-message",children:d.celular})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",value:m.email,onChange:p,className:d.email?"error":"",placeholder:"Ingrese su email"}),d.email&&e.jsx("span",{className:"error-message",children:d.email})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"gender",children:"Como se entero de nosotros"}),e.jsxs("select",{id:"canal",name:"canal",value:m.canal,onChange:p,children:[e.jsx("option",{value:"",children:"Selecionar"}),e.jsx("option",{value:"INICIATIVA",children:"INICIATIVA"}),e.jsx("option",{value:"RECOMENDADO",children:"RECOMENDADO"}),e.jsx("option",{value:"INSTAGRAM",children:"INSTAGRAM"}),e.jsx("option",{value:"TIKTOK",children:"TIKTOK"}),e.jsx("option",{value:"FACEBOOK",children:"FACEBOOK"})]})]})]}),e.jsx("button",{type:"submit",className:"submit-button",children:"Registrar Cliente"})]})]})}const Vt=({onProductFound:a,onCancel:s})=>{const[n,{data:i,isLoading:o,isError:g}]=or(),[h,m]=t.useState(""),[c,d]=t.useState(null),[x,p]=t.useState(""),[l,u]=t.useState(1),r=t.useCallback(N=>{N.trim()!==""&&N.length>2&&n(N)},[n]);t.useEffect(()=>{const N=setTimeout(()=>{r(h)},500);return()=>{clearTimeout(N)}},[h,r]);const v=N=>{m(N.target.value.toUpperCase())},b=N=>{c===N?d(null):(d(N),p(""),u(1))},f=N=>{p(N.target.value),u(1)},E=N=>{u(Number(N.target.value))},I=N=>{if(console.log("producto ",N),!x){alert("Por favor, seleccione una talla.");return}const{nombre:A,tallas:k,_id:U,preciousd:M,...F}=N;a({...F,talla:x,producto:U,precio:M,qty:l})};return e.jsxs("div",{className:"responsive-top-margin",children:[e.jsxs("div",{className:"modal-close-container",children:[e.jsx(Ye,{className:"close-icon light",onClick:s}),e.jsx("div",{className:"cancel-div",onClick:s,children:"Cancelar"}),e.jsx(fa,{})]}),e.jsxs("div",{className:"product-search-container",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"product-search-input",children:"C贸digo de Producto"}),e.jsx("input",{type:"text",id:"product-search-input",name:"product-search",value:h,onChange:v,placeholder:"Buscar producto...",autoFocus:!0})]}),e.jsxs("div",{className:"product-search-results",children:[o&&e.jsxs("div",{className:"loading-container",children:[e.jsx($e,{className:"animate-spin"})," Buscando..."]}),g&&e.jsx("p",{className:"error-message",children:"Error al buscar productos."}),i&&i.length===0&&h&&!o&&e.jsx("p",{children:"No se encontraron productos."}),i&&i.length>0&&e.jsx("div",{children:e.jsx("ul",{className:"product-search-list",children:i.map(N=>e.jsxs("li",{className:"product-search-item",children:[e.jsxs("div",{className:"product-info-clickable",onClick:()=>b(N._id),children:[e.jsx("img",{src:N.imageurl,alt:N.nombre,width:"50",className:"product-search-image"}),e.jsxs("div",{className:"product-search-info",children:[e.jsx("p",{children:N.codigo}),e.jsxs("p",{children:[N.marca," - ",N.modelo]}),e.jsxs("p",{children:["$",Number(N.preciousd).toFixed(2)]})]}),e.jsx(ss,{className:`expand-icon ${c===N._id?"expanded":""}`})]}),e.jsxs("div",{className:`tallas-selector ${c===N._id?"expanded":""}`,children:[e.jsxs("div",{className:"form-group-inline",children:[e.jsx("label",{htmlFor:`talla-select-${N._id}`,children:"Disponibilidad"}),e.jsxs("select",{className:"w-70",id:`talla-select-${N._id}`,value:x,onChange:f,children:[e.jsx("option",{value:"",disabled:!0,children:"Talla"}),Object.entries(N.tallas||{}).filter(([,A])=>A>0).map(([A])=>e.jsx("option",{value:A,children:A},A))]})]}),x&&N.tallas[x]>0&&e.jsxs("div",{className:"form-group-inline",children:[e.jsx("label",{htmlFor:`quantity-select-${N._id}`,children:"Cantidad"}),e.jsx("select",{id:`quantity-select-${N._id}`,value:l,onChange:E,children:Array.from({length:N.tallas[x]},(A,k)=>k+1).map(A=>e.jsx("option",{value:A,children:A},A))})]}),e.jsx("button",{className:"add-product-btn",onClick:()=>I(N),disabled:!x,children:"Agregar al Pedido"})]})]},N._id))})})]})]})]})},zs={metodo:"",monto:"",referencia:"",bancoOrigen:"",bancoDestino:"",memo:""};function Bt(a,s){switch(s.type){case"SET_FIELD":return{...a,[s.field]:s.value};case"RESET":return zs;default:return a}}function zt({onCancel:a,onSave:s,totalOrden:n,totalOrdenBs:i}){const[o,g]=t.useState([]),[h,m]=t.useReducer(Bt,zs),{metodo:c,monto:d,referencia:x,bancoOrigen:p,bancoDestino:l,memo:u}=h,r=[{value:"PAGOMOVIL",label:"Pago M贸vil"},{value:"TDB",label:"Tarjeta de D茅bito"},{value:"TDC",label:"Tarjeta de Cr茅dito"},{value:"EUROS",label:"Divisas (Euros)"},{value:"DOLARES",label:"Divisas (D贸lares)"},{value:"BOLIVARES",label:"Efectivo (Bol铆vares)"},{value:"ZELLE",label:"Zelle"},{value:"TRANSFERENCIA",label:"Transferencia"},{value:"PAGOCASHEA",label:"Pago Cashea"}],v=["PAGOMOVIL","TDB","TDC","BOLIVARES","TRANSFERENCIA"],b=["Venezuela","Banesco","Mercantil","Provincial","BNC","Banco Plaza"],f=t.useMemo(()=>n>0?i/n:0,[n,i]),E=!1,I=!1,N=["PAGOMOVIL","TDB","TDC","TRANSFERENCIA"].includes(c),A=v.includes(c),k=t.useMemo(()=>o.reduce((j,O)=>j+parseFloat(O.montoUSD),0),[o]),U=t.useMemo(()=>n-k,[n,k]),M=t.useMemo(()=>U*f,[U,f]),F=A?"Bs.":"$",R=(j,O)=>{m({type:"SET_FIELD",field:j,value:O})},P=()=>{if(!c||!d||parseFloat(d)<=0){T.fire("Verifique el Monto Pagado","Debe seleccionar un m茅todo de pago y Hacer click en el boton del monto","warning");return}if(N&&!l){T.fire("Campo Requerido","Por favor, seleccione un 'Banco Destino'.","warning");return}let j;const O=parseFloat(d);if(A){if(f===0){T.fire("Error","No hay tasa de cambio para pagos en Bol铆vares.","error");return}const _=O/f;if(k+_>n+.001){T.fire("Monto Excedido",`El monto a pagar no puede ser mayor al restante. Restan: $${U.toFixed(2)}`,"error");return}j={tipo:c,monto:O,moneda:"Bs.",montoUSD:_}}else{if(k+O>n+.001){T.fire("Monto Excedido",`El monto a pagar no puede ser mayor al restante. Restan: $${U.toFixed(2)}`,"error");return}j={tipo:c,monto:O,moneda:"$",montoUSD:O}}Object.assign(j,{...E,...I,...N&&l&&{bancoDestino:l},...u&&{memo:u}}),g([...o,j]),m({type:"RESET"})},S=j=>{g(o.filter((O,_)=>_!==j))},D=()=>{if(Math.abs(U).toFixed(2)!=="0.00"){T.fire("Verifique los montos",`El total pagado ($${k.toFixed(2)}) no coincide con el total de la orden ($${n.toFixed(2)}). Restan: $${U.toFixed(2)}`,"error");return}s(o)};return e.jsx("div",{className:"modal-container",children:e.jsxs("div",{className:"form-container",style:{maxHeight:"calc(100vh - 100px)",overflowY:"auto"},children:[e.jsxs("div",{className:"modal-close-container",children:[e.jsx(Ye,{className:"close-icon light",onClick:a}),e.jsxs("div",{children:["Total Orden:"," ",e.jsxs("strong",{children:["$",n.toFixed(2)," (Bs. ",i.toFixed(2),")"]})]}),e.jsx("h3",{className:"white",children:"Gesti贸n de Pagos"})]}),e.jsxs("div",{className:"form-section",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"M茅todo de Pago"}),e.jsxs("select",{value:c,onChange:j=>R("metodo",j.target.value),children:[e.jsx("option",{value:"",children:"Seleccione un m茅todo..."}),r.map(j=>{const _=v.includes(j.value)&&f===0;return e.jsxs("option",{value:j.value,disabled:_,children:[j.label," ",_?"(Tasa no disp.)":""]},j.value)})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Monto (",F,")"]}),e.jsxs("div",{className:"input-with-button",style:{position:"relative"},children:[e.jsx("input",{type:"number",value:d,onChange:j=>R("monto",j.target.value),placeholder:A?M.toFixed(2):U.toFixed(2),style:{paddingRight:"30px"}}),e.jsx("button",{type:"button",className:"link-like-btn",title:"Usar monto restante",style:{position:"absolute",right:"5px",top:"50%",transform:"translateY(-50%)",height:"80%"},onClick:()=>{const j=A?M.toFixed(2):U.toFixed(2);R("monto",j)},children:e.jsx(Qe,{size:16})})]})]})]}),e.jsxs("div",{className:"form-row",children:[I,N&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Banco Destino"}),e.jsxs("select",{value:l,onChange:j=>R("bancoDestino",j.target.value),children:[e.jsx("option",{value:"",children:"Seleccione..."}),b.map(j=>e.jsx("option",{value:j,children:j},j))]})]})]}),E,e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Memo (Opcional)"}),e.jsx("input",{type:"text",value:u,onChange:j=>R("memo",j.target.value),placeholder:"Informaci贸n adicional sobre el pago..."})]}),e.jsxs("button",{type:"button",className:"add-button",onClick:P,children:[e.jsx(Sa,{size:18})," Agregar Pago"]}),e.jsxs("div",{className:"payment-summary",children:[e.jsx("h4",{className:"centrado",children:"Pagos Agregados"}),e.jsxs("div",{className:"payment-list",children:[o.map((j,O)=>e.jsxs("div",{className:"payment-item",children:[e.jsxs("span",{children:[j.tipo,":"," ",e.jsxs("strong",{children:[j.moneda," ",j.monto.toFixed(2)]}),j.referencia&&` (Ref: ${j.referencia})`]}),e.jsx(Le,{className:"delete-item-icon",onClick:()=>S(O)})]},O)),o.length===0&&e.jsx("p",{className:"no-payment-message",children:"A煤n no se han agregado pagos."})]}),e.jsxs("div",{className:"payment-totals",children:[e.jsxs("div",{children:["Total Pagado: ",e.jsxs("strong",{children:["$",k.toFixed(2)]})]}),e.jsxs("div",{className:U.toFixed(2)!=="0.00"?"restante-pendiente":"restante-ok",children:["Restante: ",e.jsxs("strong",{children:["$",U.toFixed(2)]})]})]})]})]}),e.jsxs("button",{onClick:D,className:"submit-button",disabled:o.length===0,children:[e.jsx(Oe,{size:18})," Guardar Pagos y Cerrar"]})]})})}const qt=({showNewClientModal:a,showClienteSearchModal:s,showProductSearchModal:n,showMetodoPagoModal:i,setShowNewClientModal:o,setShowClientSearchModal:g,setShowProductSearchModal:h,setShowMetodoPagoModal:m,rif:c,setRif:d,setClienteInfo:x,ordenItems:p,handleUpdateQuantity:l,addItemToOrder:u,handleSavePagos:r,totalOrden:v,cambioDia:b})=>{const f=E=>{h(!1);const I=p.findIndex(N=>N.codigo===E.codigo&&N.talla===E.talla);I>-1?p[I].qty===E.qty?T.fire({title:"Producto ya existe",html:`El producto <strong>${E.nombre} (Talla ${E.talla})</strong> con cantidad <strong>${E.qty}</strong> ya se encuentra en la orden.`,icon:"info"}):l(I,E.qty):u(E)};return e.jsxs(e.Fragment,{children:[a&&e.jsx("div",{className:"modal-container",children:e.jsx(Gt,{identificacion:c,onRegisterSuccess:E=>{x(E),o(!1),g(!1)},onCancel:()=>o(!1)})}),s&&e.jsx(Bs,{onClientFound:E=>x(E),onNewClient:E=>{d(E),o(!0)},onCancel:()=>{d(""),x(null),g(!1)}}),n&&e.jsx("div",{className:"modal-container",children:e.jsx(Vt,{onProductFound:f,onCancel:()=>h(!1)})}),i&&v>0&&e.jsx("div",{className:"modal-container",children:e.jsx(zt,{onSave:r,onCancel:()=>m(!1),totalOrden:v,totalOrdenBs:v*b})})]})},$t=({isOpen:a,onClose:s})=>{const{data:n=[],isLoading:i}=Xe(),[o,g]=t.useState(""),[h,m]=t.useState(1),c=10,d=t.useMemo(()=>{if(!n)return[];const r=o.toLowerCase();return n.filter(v=>v.codigo.toLowerCase().includes(r)||v.marca.toLowerCase().includes(r)||v.categoria&&v.categoria.toLowerCase().includes(r))},[n,o]),x=Math.ceil(d.length/c),p=t.useMemo(()=>{const r=(h-1)*c;return d.slice(r,r+c)},[d,h,c]),l=r=>{r>=1&&r<=x&&m(r)};if(!a)return null;const u=r=>(console.log("tallas",r),!r||Object.keys(r).length===0?"N/A":Object.entries(r).filter(([,v])=>v>0).map(([v,b])=>v+" : "+b).join(", "));return e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal-content-viewer",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:"Visor de Productos"}),e.jsx("button",{onClick:s,className:"close-button",children:e.jsx(He,{size:24})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("div",{className:"viewer-controls",children:e.jsx("input",{type:"text",placeholder:"Filtrar por c贸digo, marca o categor铆a...",value:o,onChange:r=>g(r.target.value),className:"viewer-search-input"})}),i?e.jsx(te,{txt:"Cargando productos..."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"table-responsive-container",children:e.jsxs("table",{className:"viewer-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Imagen"}),e.jsx("th",{children:"C贸digo"}),e.jsx("th",{children:"Precio"}),e.jsx("th",{children:"Marca"}),e.jsx("th",{children:"Tallas Disp."})]})}),e.jsx("tbody",{children:p.map(r=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("img",{src:r.imageurl,alt:r.codigo,className:"viewer-product-image"})}),e.jsx("td",{children:r.codigo}),e.jsxs("td",{children:["$",Number(r.preciousd).toFixed(2)]}),e.jsx("td",{children:r.marca}),e.jsx("td",{children:u(r.tallas)})]},r._id))})]})}),x>1&&e.jsxs("div",{className:"viewer-pagination",children:[e.jsx("button",{onClick:()=>l(h-1),disabled:h===1,children:"Anterior"}),e.jsxs("span",{children:["P谩gina ",h," de ",x]}),e.jsx("button",{onClick:()=>l(h+1),disabled:h===x,children:"Siguiente"})]})]})]})]})})},Qt=({isOpen:a,onClose:s,onSelectClient:n})=>{const{data:i=[],isLoading:o}=bs(),[g,h]=t.useState(""),[m,c]=t.useState(1),d=10,x=t.useMemo(()=>{if(!i)return[];const r=g.toLowerCase();return i.filter(v=>v.nombre.toLowerCase().includes(r)||v.rif.toLowerCase().includes(r))},[i,g]),p=Math.ceil(x.length/d),l=t.useMemo(()=>{const r=(m-1)*d;return x.slice(r,r+d)},[x,m,d]),u=r=>{r>=1&&r<=p&&c(r)};return a?e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal-content-viewer",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:"Lista de Clientes"}),e.jsx("button",{onClick:s,className:"close-button",children:e.jsx(He,{size:24})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("div",{className:"viewer-controls",children:e.jsx("input",{type:"text",placeholder:"Filtrar por nombre o RIF/CI...",value:g,onChange:r=>h(r.target.value),className:"viewer-search-input"})}),o?e.jsx(te,{txt:"Cargando clientes..."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"table-responsive-container",children:e.jsxs("table",{className:"viewer-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nombre / Raz贸n Social"}),e.jsx("th",{children:"RIF / CI"}),e.jsx("th",{children:"Tel茅fono"}),e.jsx("th",{children:"Direcci贸n"})]})}),e.jsx("tbody",{children:l.map(r=>e.jsxs("tr",{onClick:()=>n(r),style:{cursor:"pointer"},children:[e.jsx("td",{children:r==null?void 0:r.nombre.toUpperCase()}),e.jsx("td",{children:r.rif}),e.jsx("td",{children:r.celular||"N/A"}),e.jsx("td",{children:r.direccion||"N/A"})]},r._id))})]})}),p>1&&e.jsxs("div",{className:"viewer-pagination",children:[e.jsx("button",{onClick:()=>u(m-1),disabled:m===1,children:"Anterior"}),e.jsxs("span",{children:["P谩gina ",m," de ",p]}),e.jsx("button",{onClick:()=>u(m+1),disabled:m===p,children:"Siguiente"})]})]})]})]})}):null},Yt=({isOpen:a,onClose:s,onSelectVendedor:n,selectedVendedorId:i})=>{const{data:o,isLoading:g,isError:h}=As(),[m,c]=t.useState(""),d=t.useMemo(()=>{if(!o)return[];const p=m.toLowerCase();return o.filter(l=>{var u,r,v;return(((u=l.nombre)==null?void 0:u.toLowerCase())??"").includes(p)||(((r=l.apellido)==null?void 0:r.toLowerCase())??"").includes(p)||(((v=l.cedula)==null?void 0:v.toLowerCase())??"").includes(p)})},[o,m]);if(!a)return null;const x=p=>{n(p)};return e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal-content",style:{maxWidth:"600px",maxHeight:"80vh",display:"flex",flexDirection:"column"},children:[e.jsx("div",{className:"modal-header",children:e.jsx("h3",{children:"Seleccionar Vendedor"})}),e.jsxs("div",{className:"modal-body",style:{overflowY:"auto"},children:[e.jsx("div",{className:"search-bar-container",children:e.jsx("input",{type:"text",placeholder:"Filtrar por nombre, apellido o c茅dula...",className:"search-input",value:m,onChange:p=>c(p.target.value)})}),g&&e.jsx("p",{children:"Cargando vendedores..."}),h&&e.jsx("p",{children:"Error al cargar los vendedores."}),e.jsx("div",{className:"viewer-table-container",children:e.jsxs("table",{className:"viewer-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Apellido"}),e.jsx("th",{children:"C茅dula"})]})}),e.jsx("tbody",{children:d.length>0?d.map(p=>e.jsxs("tr",{onClick:()=>x(p),className:`clickable-row ${p._id===i?"active-row":""}`,children:[e.jsx("td",{children:p.nombre}),e.jsx("td",{children:p.apellido}),e.jsx("td",{children:p.cedula})]},p._id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"3",style:{textAlign:"center"},children:"No se encontraron vendedores."})})})]})})]}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{onClick:s,className:"btn btn-secondary",children:"Cerrar"})})]})})};function Ht(){const{fecha:a,cambioDia:s,rif:n,setRif:i,clienteInfo:o,setClienteInfo:g,vendedor:h,setVendedor:m,condicion:c,ordenItems:d,metodosPago:x,descuento:p,delivery:l,setDelivery:u,memo:r,setMemo:v,setOrdenItems:b,subtotal:f,totalOrden:E,totalPagado:I,vendedores:N,isCreatingOrder:A,showNewClientModal:k,setShowNewClientModal:U,showProductSearchModal:M,setShowProductSearchModal:F,showProductViewerModal:R,setShowProductViewerModal:P,showClientViewerModal:S,setShowClientViewerModal:D,showMetodoPagoModal:j,setShowMetodoPagoModal:O,imagenAmpliadaUrl:_,setImagenAmpliadaUrl:C,handleCondicionChange:G,handleDescuentoChange:$,addItemToOrder:ee,deleteItemFromOrder:se,handleOpenPagoModal:oe,handleSavePagos:de,createOrderHandler:we}=Mt(),[Fe,Y]=t.useState(!1),re=t.useRef(null),K=y=>{g(y),T.close()},ue=y=>{i(y),U(!0)},ke=()=>{console.log("B煤squeda de cliente cancelada.")},ie=N==null?void 0:N.find(y=>y._id===h);t.useEffect(()=>{m("62ace90905009e9c1879c133"),i("V000000000"),g({nombre:"CLIENTE1",rif:"V000000000",direccion:"CARACAS",email:""})},[m,i,g]),t.useEffect(()=>{E===0&&de([])},[E,de]);const Me=(y,V)=>{const X=[...d],L=X[y];X[y]={...L,qty:V},b(X),T.fire("Cantidad Actualizada",`<strong>${L.codigo} (Talla ${L.talla})</strong>.`,"success")},Ge=(y,V)=>{T.fire({title:"驴Est谩s seguro?",text:`Se eliminar谩 el producto ${V.codigo} (Talla ${V.talla}) de la orden.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"S铆, eliminar",cancelButtonText:"Cancelar"}).then(X=>{X.isConfirmed&&(se(y),T.fire("Producto Eliminado!","success"))})},Ve=()=>{window.print()},Be=()=>e.jsxs("div",{className:"print-header-container",children:[e.jsx("img",{src:ne,alt:"Logo Tienda",className:"print-logo"}),e.jsxs("div",{className:"print-store-info",style:{flexShrink:0},children:[e.jsx("h4",{children:"DEMODA"}),e.jsx("p",{children:"RIF: J-12345678-9"}),e.jsx("p",{children:"Almacen Principal"}),e.jsx("p",{children:"Facturacion Detal"})]})]});return e.jsxs("div",{className:"facturacion-container",children:[e.jsx(Ps,{}),e.jsx(Be,{}),e.jsx("div",{className:"info-cliente",style:{padding:"0.5rem 1rem",border:"1px solid #ccc"},children:e.jsxs("div",{className:"order-header",style:{justifyContent:"space-around"},children:[e.jsx(H,{text:"Lista Clientes",children:e.jsx(Ca,{className:"add-product-icon border",size:36,onClick:()=>D(!0)})}),e.jsx(H,{text:"Lista Productos",children:e.jsx(rs,{className:"add-product-icon border",size:36,onClick:()=>P(!0)})})]})}),e.jsxs("div",{className:`info-cliente ${o?"":"alerta-sin-cliente"}`,children:[e.jsxs("div",{className:"order-header",children:[e.jsxs("h3",{children:["PEDIDO ",new Date(a).toLocaleDateString("es-VE")]}),e.jsx("div",{className:"detail-item",onClick:y=>y.stopPropagation(),children:e.jsxs("select",{id:"condicion-select",value:c,onChange:G,children:[e.jsx("option",{value:"Contado",children:"Contado"}),e.jsx("option",{value:"Credito",children:"Cr茅dito"}),e.jsx("option",{value:"Intercambio",children:"Intercambio"}),e.jsx("option",{value:"Donacion",children:"Donaci贸n"})]})}),d.length>0&&e.jsx(Pe,{className:"add-product-icon print-button",onClick:Ve})]}),e.jsxs("details",{className:"details-collapsible full-width",children:[e.jsxs("summary",{className:"details-summary",children:[" ","Cliente",e.jsx(H,{text:"Buscar/Cambiar Cliente",children:e.jsx(Na,{width:20,className:"add-product-icon",style:{color:o?"green":"#7c0505",marginLeft:"25px"},onClick:y=>{var V;y.preventDefault(),(V=re.current)==null||V.show()}})})]}),o&&e.jsxs("div",{className:"client-order-details",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Nombre o Razon Social"}),e.jsx("span",{className:"detail-value",children:o.nombre})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Tel茅fono"}),e.jsx("span",{className:"detail-value",children:o.celular})]}),e.jsxs("div",{className:"detail-item full-width",children:[e.jsx("span",{className:"detail-label",children:"Direcci贸n"}),e.jsx("span",{className:"detail-value",children:o.direccion})]})]})]}),e.jsxs("details",{className:"details-collapsible full-width",children:[e.jsxs("summary",{className:"details-summary",children:["Vendedor"," ",e.jsx(H,{text:"Asignar Vendedor",children:e.jsx(va,{className:"add-product-icon",onClick:()=>Y(!0)})})]}),e.jsx("div",{className:"client-order-details",children:ie?e.jsxs("div",{className:"detail-item vendedor",children:[e.jsx("span",{className:"detail-label",children:"Asignado a"}),e.jsxs("span",{className:"detail-value",children:[ie.nombre," ",ie.apellido]})]}):e.jsx("div",{className:"detail-item",children:e.jsx("span",{className:"detail-value alerta-sin-cliente",style:{padding:"0.2rem"},children:"No se ha asignado un vendedor."})})})]})]}),e.jsxs("div",{className:"info-productos",children:[e.jsxs("div",{className:"order-header",children:[e.jsx("div",{className:"flx",style:{gap:"0.5rem"},children:e.jsx("h3",{children:"Productos"})}),e.jsx("div",{children:e.jsx(H,{text:"Agregar Producto",children:e.jsx(Ie,{className:"add-product-icon",size:28,onClick:()=>F(!0)})})})]}),d.length>0?e.jsx("div",{className:"order-items-list",children:d.map((y,V)=>e.jsxs("div",{className:`order-item-row ${V===d.length-1?"new-item":""}`,children:[e.jsx("img",{src:y.imageurl,alt:y.nombre,className:"order-item-image",onClick:()=>C(y.imageurl)}),e.jsxs("div",{className:"order-item-details",children:[e.jsx("p",{className:"item-name",children:y.nombre}),e.jsxs("p",{className:"item-meta",children:[y.marca," ",y.modelo," ",y.color," Talla ",y.talla," (",y.codigo,")"]})]}),e.jsxs("div",{className:"order-item-price",children:["$",Number(y.precio).toFixed(2)]}),e.jsxs("div",{className:"order-item-quantity",children:["x ",y.qty]}),e.jsxs("div",{className:"order-item-total",children:["$",(y.precio*y.qty).toFixed(2)]}),e.jsx("div",{className:"order-item-actions",children:e.jsx(Le,{onClick:()=>Ge(V,y),className:"delete-item-icon"})})]},`${y._id}-${y.talla}`))}):e.jsxs("div",{className:"empty-cart-message",children:[e.jsx(Ra,{size:48}),e.jsx("p",{children:"Tu orden est谩 vac铆a"}),e.jsx("span",{children:"Agrega productos para comenzar."})]})]}),f>0&&e.jsxs("div",{className:"info-resumen",children:[e.jsx("h3",{children:"Resumen"}),e.jsxs("div",{className:"summary-row",style:{fontSize:"1.3rem"},children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{className:"facturacion-subtotal-value",children:["$",f.toFixed(2)]})]}),e.jsxs("div",{className:"summary-row",style:{fontSize:"1.3rem"},children:[e.jsx("label",{htmlFor:"descuento",children:"Descuento (-)"}),e.jsx("input",{id:"descuento",type:"number",value:p.toFixed(2),onChange:$,style:{width:"90px",textAlign:"right",padding:"2px 5px",fontSize:"1.3rem",border:"1px solid #ccc",borderRadius:"4px"}})]}),e.jsxs("div",{className:"summary-row",style:{fontSize:"1.3rem"},children:[e.jsx("label",{htmlFor:"delivery",children:"Delivery (+)"}),e.jsx("div",{className:"select-wrapper-left",style:{width:"100px"},children:e.jsxs("select",{id:"delivery",value:l,onChange:y=>u(Number(y.target.value)),style:{textAlign:"right",padding:"2px 5px",fontSize:"1.3rem",border:"1px solid #ccc",borderRadius:"4px"},children:[e.jsx("option",{value:0,children:"$0.00"}),Array.from({length:10},(y,V)=>(V+1)*5).map(y=>e.jsxs("option",{value:y,children:["$",y.toFixed(2)]},y))]})})]}),e.jsxs("div",{className:"summary-row total",style:{fontSize:"1.4rem",marginTop:"0.5rem"},children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["$",E.toFixed(2)]})]}),s>0&&e.jsxs("div",{className:"summary-row",style:{color:"#007bff",fontWeight:"bold",marginTop:"0.5rem",fontSize:"1.3rem"},children:[e.jsxs("span",{children:["Total Bs. (BCV: ",s,")"]}),e.jsxs("span",{children:["Bs. ",(E*s).toLocaleString("es-VE",{minimumFractionDigits:2})]})]})]}),E>0&&e.jsxs("div",{className:"info-pagos",children:[e.jsxs("div",{className:"order-header",children:[e.jsx("h3",{children:"Metodos de Pagos"}),e.jsx(H,{text:"Gestionar M茅todos de Pago",children:e.jsx(Ie,{className:"add-product-icon",onClick:oe})})]}),e.jsx("div",{className:"payment-list-summary",children:x.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("details",{className:"details-collapsible full-width",children:[e.jsxs("summary",{className:"details-summary",children:[" ",e.jsx("span",{children:e.jsxs("strong",{children:["Total Pagado: $",I.toFixed(2)]})}),s>0&&e.jsx("span",{children:e.jsxs("strong",{children:["(Bs. ",(I*s).toLocaleString("es-VE",{minimumFractionDigits:2}),")"]})})]}),(()=>{const y=["PAGOMOVIL","TDB","TDC","BOLIVARES","TRANSFERENCIA"];return x.map((V,X)=>{const L=y.includes(V.tipo||V.metodo);let w;if(L)w=`Bs. ${V.monto.toLocaleString("es-VE",{minimumFractionDigits:2})}`;else{const W=V.monto,me=W*s;w=`$${W.toLocaleString("es-VE",{minimumFractionDigits:2})} (Bs. ${me.toLocaleString("es-VE",{minimumFractionDigits:2})})`}return e.jsxs("div",{className:"summary-row",children:[e.jsx("span",{className:"detail-label",style:{textTransform:"none",fontSize:"1.2rem"},children:V.tipo||V.metodo}),e.jsx("span",{children:w})]},X)})})()]}),E-I>.009&&c!=="Credito"&&e.jsxs("div",{className:"summary-row restante-pendiente",style:{marginTop:"0.5rem"},children:[e.jsx("span",{children:e.jsx("strong",{children:"Falta por Pagar"})}),e.jsx("span",{children:e.jsxs("strong",{children:["$",(E-I).toFixed(2)]})})]})]}):e.jsx("p",{className:"no-payment-message",children:"No se han agregado m茅todos de pago."})})]}),E>0&&e.jsxs("div",{className:`info-memo ${(c==="Donacion"||c==="Intercambio")&&!r.trim()?"alerta-sin-cliente":""}`,children:[e.jsx("h3",{children:"Memo / Notas"}),e.jsx("textarea",{id:"memo-input",value:r,onChange:y=>v(y.target.value),rows:"2",style:{width:"100%",borderRadius:"5px",border:"1px solid #ced4da",padding:"8px"},placeholder:"Informaci贸n adicional sobre la orden..."})]}),e.jsx(Bs,{ref:re,onClientFound:K,onNewClient:ue,onCancel:ke}),e.jsx(qt,{showNewClientModal:k,setShowNewClientModal:U,showClienteSearchModal:!1,setShowClientSearchModal:()=>{},showProductSearchModal:M,setShowProductSearchModal:F,showMetodoPagoModal:j,setShowMetodoPagoModal:O,rif:n,setRif:i,setClienteInfo:g,ordenItems:d,handleUpdateQuantity:Me,addItemToOrder:ee,handleSavePagos:de,totalOrden:E,cambioDia:s}),e.jsx($t,{isOpen:R,onClose:()=>P(!1)}),e.jsx(Yt,{isOpen:Fe,onClose:()=>Y(!1),onSelectVendedor:y=>{m(y._id),Y(!1)},selectedVendedorId:h}),e.jsx(Qt,{isOpen:S,onClose:()=>D(!1),onSelectClient:y=>{g(y),D(!1)}}),e.jsx("button",{className:"checkout-button",onClick:we,disabled:d.length===0||!o||!h||A,children:"Crear Orden"}),_&&e.jsx("div",{className:"backdrop-imagen-ampliada",onClick:()=>C(null),children:e.jsx("img",{src:_,alt:"Imagen Ampliada",className:"imagen-ampliada"})})]})}function Kt(){return e.jsxs("div",{children:[e.jsx("h2",{className:"centrado",children:"ADMINISTRADOR DEMODA"}),e.jsx("h3",{className:"centrado font-x",children:"Links Directo a Aplicaciones"}),e.jsx("div",{className:"linktree-container",children:e.jsxs("span",{className:"span-route",children:[e.jsx("label",{children:"Tablas Dinamicas Consolidadas"}),e.jsxs("div",{className:"link-container",children:[e.jsx(q,{}),e.jsx(z,{to:"/consolidadoventas",children:e.jsx("p",{className:"span-admin-consolidado",children:"Ventas Consolidadas (analitics)"})})]}),e.jsxs("div",{className:"link-container",children:[e.jsx(q,{}),e.jsx(z,{to:"/consolidadoarticulos",children:e.jsx("p",{className:"span-admin-consolidado",children:"Ventas por Articulos (analitics)"})})]})]})}),e.jsx("div",{className:"linktree-container",children:e.jsxs("span",{className:"span-route",children:[e.jsx("label",{children:"Front-End (ventas al detal)"}),e.jsxs("div",{className:"link-container",children:[e.jsx(q,{}),e.jsxs("a",{href:"https://front-chacao-ems84m3vx-tyrant7995gmailcoms-projects.vercel.app/",rel:"nofollow noopener noreferrer",target:"_blank",children:[" ",e.jsx("p",{children:"Front-End Tienda Chacao"})]})]}),e.jsxs("div",{className:"link-container",children:[e.jsx(q,{}),e.jsxs("a",{href:"https://front-merpoeste-di4orofvq-tyrant7995gmailcoms-projects.vercel.app/",rel:"nofollow noopener noreferrer",target:"_blank",children:[" ",e.jsx("p",{children:"Front-End Tienda Merpoeste"})]})]}),e.jsxs("div",{className:"link-container",children:[e.jsx(q,{}),e.jsxs("a",{href:"https://planner-b4ey3we1w-tyrant7995gmailcoms-projects.vercel.app/",rel:"nofollow noopener noreferrer",target:"_blank",children:[" ",e.jsx("p",{children:"Planificador Tienda Chacao"})]})]}),e.jsxs("div",{className:"link-container",children:[e.jsx(q,{}),e.jsxs("a",{href:"https://horario-p9wma9x58-franklin-bolivars-projects.vercel.app/",rel:"nofollow noopener noreferrer",target:"_blank",children:[" ",e.jsx("p",{children:"Horarios Tienda Chacao"})]})]})]})}),e.jsx("div",{className:"linktree-container",children:e.jsxs("span",{className:"span-route",children:[e.jsx("label",{children:"Control de Gastos"}),e.jsxs("div",{className:"link-container",children:[e.jsx(q,{}),e.jsxs("a",{href:"https://a-vite-project-q2dooo892-skynetfrank.vercel.app/",rel:"nofollow noopener noreferrer",target:"_blank",children:[" ",e.jsx("p",{children:"Control de Gastos Los Frailes"})]})]}),e.jsxs("div",{className:"link-container",children:[e.jsx(q,{}),e.jsxs("a",{href:"https://gastos-chacao2app-r0fuei42i-franklin-bolivars-projects.vercel.app/",rel:"nofollow noopener noreferrer",target:"_blank",children:[" ",e.jsx("p",{children:"Control de Gastos Chacao "})]})]})]})}),e.jsx("div",{className:"linktree-container",children:e.jsxs("span",{className:"span-route",children:[e.jsx("label",{children:"Otros"}),e.jsxs("div",{className:"link-container",children:[e.jsx(q,{}),e.jsxs("a",{href:"https://intranet-v2-9drcsb58h-tyrant7995gmailcoms-projects.vercel.app/",rel:"nofollow noopener noreferrer",target:"_blank",children:[" ",e.jsx("p",{children:"Chat Intranet Demoda"})]})]}),e.jsxs("div",{className:"link-container",children:[e.jsx(q,{}),e.jsxs("a",{href:"https://admin-reseller-2vba5qtd7-franklin-bolivars-projects.vercel.app/",rel:"nofollow noopener noreferrer",target:"_blank",children:[" ",e.jsx("p",{children:"Administrador de Revendedores"})]})]}),e.jsxs("div",{className:"link-container",children:[e.jsx(q,{}),e.jsxs("a",{href:"https://preorder-atn4pwqy4-skynetfrank.vercel.app/",rel:"nofollow noopener noreferrer",target:"_blank",children:[" ",e.jsx("p",{children:"Administrador de Preorden "})]})]})]})}),e.jsx("div",{className:"linktree-container",children:e.jsxs("span",{className:"span-route pd",children:[e.jsx("label",{children:"Plaza Dental"}),e.jsxs("div",{className:"link-container pd",children:[e.jsx(q,{}),e.jsxs("a",{href:"https://plazadental-v2-j2g1jnntr-tyrant7995gmailcoms-projects.vercel.app/",rel:"nofollow noopener noreferrer",target:"_blank",children:[" ",e.jsx("p",{children:"Plaza Dental 2025 (nuevo)"})]})]}),e.jsxs("div",{className:"link-container pd",children:[e.jsx(q,{}),e.jsxs("a",{href:"https://plaza-dental-ihm65vu3k-franklin-bolivars-projects.vercel.app/",rel:"nofollow noopener noreferrer",target:"_blank",children:[" ",e.jsx("p",{children:"Plaza Dental (Antiguo)"})]})]}),e.jsxs("div",{className:"link-container pd",children:[e.jsx(q,{}),e.jsxs("a",{href:"https://plaza-stock-cpbxmd5c6-franklin-bolivars-projects.vercel.app/",rel:"nofollow noopener noreferrer",target:"_blank",children:[" ",e.jsx("p",{children:"Inventario Plaza Dental"})]})]}),e.jsxs("div",{className:"link-container pd",children:[e.jsx(q,{}),e.jsxs("a",{href:"https://planner-plaza-9tp7wnvii-tyrant7995gmailcoms-projects.vercel.app/",rel:"nofollow noopener noreferrer",target:"_blank",children:[" ",e.jsx("p",{children:"Planificador Plaza Dental"})]})]})]})})]})}const Xt=()=>{var b;const{id:a}=Ee(),{data:s,isLoading:n,isError:i,error:o}=Ds(a),g=()=>{window.print()};if(n)return e.jsx("div",{className:"loading-container",children:"Cargando orden..."});if(i)return e.jsxs("div",{className:"error-container",children:[e.jsx("h2",{children:"Error al cargar la orden"}),e.jsx("p",{children:((b=o==null?void 0:o.data)==null?void 0:b.message)||o.error}),e.jsxs(z,{to:"/facturacion",className:"back-link",children:[e.jsx(xe,{})," Volver"]})]});if(!s)return e.jsxs("div",{className:"error-container",children:[e.jsx("h2",{children:"No se encontr贸 la orden"}),e.jsxs(z,{to:"/facturacion",className:"back-link",children:[e.jsx(xe,{})," Volver"]})]});const{fecha:h,clienteInfo:m,orderItems:c,subtotal:d,descuento:x,iva:p,delivery:l,totalVenta:u,_id:r,pago:v}=s;return e.jsxs("div",{className:"print-order-container",children:[e.jsxs("div",{className:"print-controls",children:[e.jsxs(z,{to:"/facturacion",className:"back-button",children:[e.jsx(xe,{})," Volver a Facturaci贸n"]}),e.jsxs("button",{onClick:g,className:"print-button",children:[e.jsx(Pe,{})," Imprimir"]})]}),e.jsxs("div",{className:"invoice-paper",children:[e.jsxs("header",{className:"invoice-header",children:[e.jsx("img",{src:ne,alt:"Logo de la Tienda",className:"invoice-logo"}),e.jsxs("div",{className:"store-details",children:[e.jsx("h2",{children:"DEMODA"}),e.jsx("p",{children:"RIF: J-12345678-9"}),e.jsx("p",{children:"Direcci贸n de la tienda"}),e.jsx("p",{children:"Tel茅fono: (0212) 555-1234"})]})]}),e.jsxs("section",{className:"order-info",children:[e.jsxs("div",{className:"order-meta",children:[e.jsx("h3",{children:"Orden de Venta"}),e.jsxs("p",{children:[e.jsx("strong",{children:"N潞:"})," ",r.slice(-6).toUpperCase()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Fecha:"})," ",new Date(h).toLocaleDateString("es-VE")]})]}),e.jsxs("div",{className:"client-details",children:[e.jsx("h3",{children:"Cliente"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Nombre:"})," ",m.nombre]}),e.jsxs("p",{children:[e.jsx("strong",{children:"RIF/CI:"})," ",m.rif]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Tel茅fono:"})," ",m.telefono]})]})]}),e.jsx("section",{className:"order-items",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"C贸digo"}),e.jsx("th",{children:"Descripci贸n"}),e.jsx("th",{children:"Cant."}),e.jsx("th",{children:"Precio"}),e.jsx("th",{children:"Total"})]})}),e.jsx("tbody",{children:c.map(f=>e.jsxs("tr",{children:[e.jsx("td",{children:f.codigo}),e.jsxs("td",{children:[f.nombre," (Talla: ",f.talla,")"]}),e.jsx("td",{children:f.qty}),e.jsxs("td",{children:["$",Number(f.precio).toFixed(2)]}),e.jsxs("td",{children:["$",(f.qty*f.precio).toFixed(2)]})]},f._id))})]})}),e.jsx("section",{className:"order-summary",children:e.jsxs("div",{className:"summary-details",children:[e.jsxs("div",{className:"summary-row",children:[e.jsx("span",{children:"Subtotal:"}),e.jsxs("span",{children:["$",Number(d).toFixed(2)]})]}),x>0&&e.jsxs("div",{className:"summary-row",children:[e.jsx("span",{children:"Descuento:"}),e.jsxs("span",{children:["-$",Number(x).toFixed(2)]})]}),e.jsxs("div",{className:"summary-row",children:[e.jsx("span",{children:"IVA (16%):"}),e.jsxs("span",{children:["$",Number(p).toFixed(2)]})]}),l>0&&e.jsxs("div",{className:"summary-row",children:[e.jsx("span",{children:"Delivery:"}),e.jsxs("span",{children:["$",Number(l).toFixed(2)]})]}),e.jsxs("div",{className:"summary-row total",children:[e.jsx("span",{children:"Total a Pagar:"}),e.jsxs("span",{children:["$",Number(u).toFixed(2)]})]})]})}),e.jsx("footer",{className:"invoice-footer",children:e.jsx("p",{children:"Gracias por su compra"})})]})]})};function Wt(a){const s=ae(),[n,i]=t.useState({codigo:"",categoria:"TEXTILES",marca:"Sin Marca",modelo:"Sin Modelo",color:"",genero:"Unisex",preciousd:"25",tipo:"Gorra",tallas:{}}),[o,g]=t.useState(""),[h,m]=t.useState(""),[c,d]=t.useState(null),[x,p]=t.useState(!1),[l,u]=t.useState(0),[r,{isLoading:v,isSuccess:b,isError:f,error:E}]=rr(),I=Vs.flatMap(S=>S.label),N=t.useMemo(()=>[...Us].sort(),[]),A=t.useMemo(()=>[...ks].sort(),[]),k=t.useMemo(()=>[...Ms].sort(),[]),U=t.useMemo(()=>[...Fs].sort(),[]),M=t.useMemo(()=>Object.values(n.tallas).reduce((S,D)=>S+(Number(D)||0),0),[n.tallas]);t.useEffect(()=>{var S;f&&T.fire({title:"Codigo Ya Existe",text:((S=E==null?void 0:E.data)==null?void 0:S.message)||"Ocurri贸 un error al crear el producto.",icon:"error"}),b&&T.fire({title:"Producto Creado con Exito!",text:"Crear Producto",icon:"success"}).then(D=>{s("/verproductos")})},[b,f,E,s]),t.useEffect(()=>{if(!h)return;(()=>{p(!0);const D=new FormData;D.append("file",h),D.append("upload_preset","ronald_preset"),D.append("cloud_name","ronaldimg"),D.append("folder","productos"),fetch("https://api.cloudinary.com/v1_1/ronaldimg/image/upload",{method:"post",body:D}).then(j=>j.json()).then(j=>{u(100),p(!1),g(j.secure_url)}).catch(j=>{p(!1),T.fire("Error de Carga","No se pudo subir la imagen a Cloudinary.","error"),console.log(j)})})()},[h]);const F=async S=>{if(S.preventDefault(),!n.codigo){T.fire({title:"Falta el Codigo",text:"Crear Producto",icon:"warning"});return}if(n.codigo.length<5){T.fire({title:"Codigo Invalido..Verifique",text:"Crear Producto",icon:"warning"});return}if(!o){T.fire({title:"Debe Asociar una Imagen al Producto",text:"Crear Producto",icon:"warning"});return}try{await r({...n,existencia:M,imageurl:o}).unwrap()}catch(D){console.error("Fallo al crear el producto:",D)}},R=S=>{const{name:D,value:j}=S.target;i(O=>({...O,[D]:j}))},P=S=>{const{name:D,value:j}=S.target,O=j===""?0:Number(j);i(_=>{const C={..._.tallas,[D]:O};return O===0&&delete C[D],{..._,tallas:C}})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flx column pad-0 jcenter",children:[e.jsx("h2",{className:"editar pad-05",children:"NUEVO PRODUCTO"})," ",e.jsxs("form",{className:"signin-form",onSubmit:F,style:{maxWidth:"700px",gap:"1.5rem"},children:[e.jsxs("div",{className:"form-section w100p",children:[e.jsx("h3",{children:"Informaci贸n Principal"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"C贸digo"}),e.jsx("input",{type:"text",name:"codigo",required:!0,placeholder:"CODIGO",value:n.codigo.toUpperCase(),onChange:R})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Precio (USD)"}),e.jsx("input",{type:"number",name:"preciousd",required:!0,placeholder:"Ej: 25.00",value:n.preciousd,onChange:R})]})]})]}),e.jsxs("div",{className:"form-section w100p",children:[e.jsx("h3",{children:"Clasificaci贸n"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Categor铆a"}),e.jsx("select",{name:"categoria",value:n.categoria,onChange:R,required:!0,children:ws.map(S=>e.jsx("option",{value:S,children:S},S))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"G茅nero"}),e.jsxs("select",{name:"genero",value:n.genero,onChange:R,required:!0,children:[e.jsx("option",{value:"",children:"Seleccione..."}),Gs.map(S=>e.jsx("option",{value:S,children:S},S))]})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Marca"}),e.jsxs("select",{name:"marca",value:n.marca,onChange:R,required:!0,children:[e.jsx("option",{value:"",children:"Seleccione..."}),N.map(S=>e.jsx("option",{value:S,children:S},S))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Modelo"}),e.jsxs("select",{name:"modelo",value:n.modelo,onChange:R,required:!0,children:[e.jsx("option",{value:"",children:"Seleccione..."}),A.map(S=>e.jsx("option",{value:S,children:S},S))]})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Tipo"}),e.jsxs("select",{name:"tipo",value:n.tipo,onChange:R,required:!0,children:[e.jsx("option",{value:"",children:"Seleccione..."}),k.map(S=>e.jsx("option",{value:S,children:S},S))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Color"}),e.jsxs("select",{name:"color",value:n.color,onChange:R,required:!0,children:[e.jsx("option",{value:"",children:"Seleccione..."}),U.map(S=>e.jsx("option",{value:S,children:S},S))]})]})]})]}),e.jsx("div",{className:"form-section w100p",children:e.jsxs("details",{children:[e.jsx("summary",{className:"mb-1",children:e.jsxs("span",{children:["Existencia por Talla (",M," unidades)"]})}),e.jsx("div",{className:"flx jcenter wrap pad-0",style:{gap:"0.5rem"},children:I.map(S=>n.categoria==="CALZADO"&&(n.genero==="Dama"&&(Number(S)<35||Number(S)>40||isNaN(S))||n.genero==="Caballero"&&(Number(S)<40||isNaN(S))||n.genero==="Ni帽o"&&(Number(S)>35||isNaN(S)))?null:e.jsxs("div",{className:`edit-span-tallas ${n.tallas[S]?"":"inactive"}`,children:[e.jsx("span",{children:S}),e.jsx("input",{type:"number",value:n.tallas[S]||"",className:"input-talla",name:S,onChange:P,placeholder:"0"})]},S))})]})}),e.jsxs("div",{className:"form-section w100p",children:[e.jsx("h3",{children:"Imagen del Producto"}),e.jsxs("div",{className:"edit-image-container mb-1 mtop-1",children:[e.jsxs("div",{className:"input-file-container",onClick:()=>document.querySelector(".input-field").click(),children:[e.jsx("input",{type:"file",accept:"image/*",className:"input-field",hidden:!0,onChange:({target:{files:S}})=>{S&&S[0]&&new ds(S[0],{quality:.6,success:D=>{d(URL.createObjectURL(D)),m(D)}})}}),c?e.jsx("img",{src:c,alt:"Vista previa"}):e.jsxs("div",{className:"upload-icon",children:[e.jsx(os,{size:48,color:"#888"}),e.jsx("p",{children:"Selecciona una imagen"})]})]}),x&&e.jsx("div",{className:"upload-img-info",children:l<100?e.jsxs(e.Fragment,{children:[e.jsx($e,{className:"animate-spin"}),e.jsx("span",{children:"Subiendo..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Qe,{color:"green"}),e.jsx("span",{children:"Imagen Cargada"})]})}),e.jsx("p",{className:"font-x centrado",children:"Click en el recuadro para seleccionar o cambiar la imagen"})]})]}),e.jsx("div",{className:"form-actions w100p",children:e.jsxs("button",{type:"submit",className:"signin-button",disabled:v||x,children:[v||x?e.jsx("div",{className:"spinner"}):e.jsx(Oe,{}),e.jsx("span",{children:v?"Guardando...":"Guardar Producto"})]})})]})]})})}const ze={container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"calc(100vh - 200px)",textAlign:"center",backgroundColor:"#f8f9fa",borderRadius:"8px",margin:"1rem",padding:"2rem",color:"#495057"},title:{fontSize:"2.5rem",fontWeight:"bold",marginTop:"1rem"},text:{fontSize:"1.1rem",maxWidth:"500px",lineHeight:"1.6"}};function Jt(){return e.jsxs("div",{style:ze.container,children:[e.jsx(ba,{size:64,color:"#ffc107"}),e.jsx("h1",{style:ze.title,children:"P谩gina en Construcci贸n"}),e.jsxs("p",{style:ze.text,children:["Estamos trabajando para tener esta secci贸n lista lo antes posible.",e.jsx("br",{}),"Ofrecemos disculpas por las molestias."]}),e.jsx(z,{to:"/",className:"header-login-button",style:{marginTop:"2rem"},children:"Volver al Inicio"})]})}function Zt(){var u;const{id:a}=Ee(),{data:s,isLoading:n,isError:i,error:o}=Ds(a);if(n)return e.jsx(te,{txt:"Cargando detalles de la orden..."});if(i)return e.jsxs("div",{className:"empty-state",children:[e.jsx(cs,{size:48,color:"#dc3545"}),e.jsx("h2",{style:{color:"#dc3545"},children:"Error al Cargar la Orden"}),e.jsx("p",{children:((u=o==null?void 0:o.data)==null?void 0:u.message)||"No se pudo encontrar la orden especificada."}),e.jsxs(z,{to:"/verpedidos",className:"back-button-error",children:[e.jsx(xe,{size:18})," Volver al listado"]})]});const{orderItems:g,subtotal:h,iva:m,totalVenta:c,delivery:d,clienteInfo:x,createdAt:p,pago:l}=s;return console.log("order",s),e.jsxs("div",{className:"order-detail-container",children:[e.jsxs("div",{className:"invoice-header",children:[e.jsx("img",{src:Ke,alt:"Logo de la Tienda",className:"invoice-logo"}),e.jsxs("div",{className:"store-details",children:[e.jsx("h2",{children:"DEMODA"}),e.jsx("p",{children:"RIF: J-50151733-9"}),e.jsx("p",{children:"Edif. Los Frailes, Piso 6. Chuao. Caracas"}),e.jsx("p",{children:"Tel茅fono: (0412) 611-3970"})]})]}),e.jsxs("div",{className:"order-detail-header",children:[e.jsxs("h1",{children:["Orden ",e.jsxs("span",{children:["...",s._id.substring(s._id.length-6)]})]}),e.jsxs("p",{className:"order-date",children:["Fecha: ",J(p).format("DD/MM/YYYY")]}),e.jsxs(z,{to:"/verpedidos",className:"back-button",children:[e.jsx(xe,{size:18}),e.jsx("span",{children:"Volver al listado"})]})]}),e.jsxs("div",{className:"order-detail-grid",children:[e.jsxs("div",{className:"order-detail-main",children:[e.jsxs("div",{className:"detail-card",children:[e.jsx("h2",{className:"detail-card-title",children:"Cliente"}),e.jsxs("div",{className:"client-details-list",children:[e.jsxs("p",{children:[e.jsx(Z,{size:16})," ",e.jsx("strong",{children:x.nombre})]}),e.jsxs("p",{children:[e.jsx(Ta,{size:16})," RIF/CI: ",x.rif]}),e.jsxs("p",{children:[e.jsx(Se,{size:16})," ",e.jsx("a",{href:`mailto:${x.email}`,children:x.email||"N/A"})]}),e.jsxs("p",{children:[e.jsx(De,{size:16})," ",x.celular||"N/A"]}),e.jsxs("p",{children:[e.jsx(is,{size:16})," ",x.direccion||"N/A"]})]})]}),e.jsxs("div",{className:"detail-card",children:[e.jsx("h2",{className:"detail-card-title",children:"Art铆culos del Pedido"}),e.jsx("div",{className:"order-items-list-detail",children:g.map(r=>e.jsxs("div",{className:"order-item-detail",children:[e.jsx("img",{src:r.imageurl,alt:r.nombre,className:"order-item-image-detail"}),e.jsxs("div",{className:"order-item-info-detail",children:[e.jsx("p",{className:"item-name",children:r.marca}),e.jsxs("p",{className:"item-meta",children:[r.qty," x $",r.precio.toFixed(2)]})]}),e.jsxs("p",{className:"order-item-total-detail",children:["$",(r.qty*r.precio).toFixed(2)]})]},r._id))})]})]}),e.jsxs("div",{className:"order-detail-sidebar",children:[e.jsxs("div",{className:"detail-card",children:[e.jsx("h2",{className:"detail-card-title",children:"Resumen del Pedido"}),e.jsxs("div",{className:"summary-list",children:[e.jsxs("div",{className:"summary-row-detail",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["$",h.toFixed(2)]})]}),e.jsxs("div",{className:"summary-row-detail",children:[e.jsx("span",{children:"Env铆o"}),e.jsxs("span",{children:["$",d.toFixed(2)]})]}),e.jsxs("div",{className:"summary-row-detail",children:[e.jsx("span",{children:"IVA"}),e.jsxs("span",{children:["$",m.toFixed(2)]})]}),e.jsxs("div",{className:"summary-row-detail total",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["$",c.toFixed(2)]})]})]})]}),e.jsxs("div",{className:"detail-card",children:[e.jsx("h2",{className:"detail-card-title",children:"Estado del Pago"}),(l==null?void 0:l.length)>0?e.jsx("div",{className:"payment-details-list",children:l.map((r,v)=>e.jsxs("div",{className:"status-box paid",children:[e.jsx(ya,{size:20}),e.jsxs("div",{children:[e.jsxs("p",{className:"status-title",children:[r.tipo,": $",r.monto.toFixed(2)]}),e.jsxs("p",{className:"status-text",children:["Realizado el ",J(r.fecha).format("DD/MM/YYYY")]})]})]},v))}):e.jsxs("div",{className:"status-box pending",children:[e.jsx(ls,{size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"status-title",children:"Estado del Pago"}),e.jsx("p",{className:"status-text",children:"Pendiente de Pago"})]})]})]})]})]})]})}const qs=({currentPage:a,totalPages:s,onPageChange:n})=>{if(s<=1)return null;const i=()=>{a>1&&n(a-1)},o=()=>{a<s&&n(a+1)},g=()=>{const h=[];if(s<=5)for(let c=1;c<=s;c++)h.push(c);else{let c=Math.max(1,a-2),d=Math.min(s,a+2);a<=3?(c=1,d=5):a>=s-2&&(c=s-5+1,d=s);for(let x=c;x<=d;x++)h.push(x)}return h};return e.jsxs("div",{className:"pagination-container",children:[e.jsxs("button",{onClick:i,disabled:a===1,className:"pagination-button",children:[e.jsx(Ia,{size:18})," Anterior"]}),g().map(h=>e.jsx("button",{onClick:()=>n(h),className:`pagination-button ${a===h?"active":""}`,children:h},h)),e.jsxs("button",{onClick:o,disabled:a===s,className:"pagination-button",children:["Siguiente ",e.jsx(_a,{size:18})]})]})};function eo(){var F;const{data:a,isLoading:s,isError:n,error:i}=ft(),[o,g]=t.useState(1),[h]=t.useState(15),[m,c]=t.useState(""),[d,x]=t.useState(""),[p,l]=t.useState(""),[u,r]=t.useState({key:"fecha",direction:"descending"}),v=t.useMemo(()=>{let R=a?[...a]:[];return u.key!==null&&R.sort((P,S)=>{var O,_;const D=u.key==="cliente"?(O=P.clienteInfo)==null?void 0:O.nombre:P[u.key],j=u.key==="cliente"?(_=S.clienteInfo)==null?void 0:_.nombre:S[u.key];return D<j?u.direction==="ascending"?-1:1:D>j?u.direction==="ascending"?1:-1:0}),R},[a,u]);if(s)return e.jsx(te,{txt:"Cargando 贸rdenes..."});if(n)return e.jsxs("div",{className:"empty-state",children:[e.jsx(cs,{size:48,color:"#dc3545"}),e.jsx("h2",{style:{color:"#dc3545"},children:"Error al Cargar rdenes"}),e.jsx("p",{children:((F=i==null?void 0:i.data)==null?void 0:F.message)||i.error})]});const b=v?v.filter(R=>{var O;const P=J(R.fecha),S=(O=R.clienteInfo)==null?void 0:O.nombre.toLowerCase().includes(m.toLowerCase()),D=d?P.isAfter(J(d).startOf("day").subtract(1,"second")):!0,j=p?P.isBefore(J(p).endOf("day")):!0;return S&&D&&j}):[],f=Math.ceil(b.length/h),E=o*h,I=E-h,N=b.slice(I,E),A=R=>{g(R)},k=R=>{c(R.target.value),g(1)},U=()=>{c(""),x(""),l(""),g(1),r({key:"fecha",direction:"descending"})},M=R=>{let P="ascending";u.key===R&&u.direction==="ascending"&&(P="descending"),r({key:R,direction:P}),g(1)};return e.jsxs("div",{className:"order-list-container",children:[e.jsxs("div",{className:"order-list-header",children:[e.jsx("h1",{className:"section-title",children:"Historial de rdenes"}),e.jsxs("div",{className:"filters-container",children:[e.jsxs("div",{className:"date-filter-container",children:[e.jsx("label",{htmlFor:"startDate",children:"Desde:"}),e.jsx("input",{type:"date",id:"startDate",value:d,onChange:R=>x(R.target.value)}),e.jsx("label",{htmlFor:"endDate",children:"Hasta:"}),e.jsx("input",{type:"date",id:"endDate",value:p,onChange:R=>l(R.target.value)})]}),e.jsxs("div",{className:"search-input-container",children:[e.jsx(ns,{className:"search-input-icon"}),e.jsx("input",{type:"text",placeholder:"Buscar por cliente...",value:m,onChange:k})]}),e.jsxs("button",{onClick:U,className:"clear-filters-btn",children:[e.jsx(He,{size:16})," Limpiar"]})]})]}),a&&a.length>0?e.jsxs("div",{className:"table-responsive-container",children:[e.jsxs("table",{className:"order-list-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsxs("th",{className:"sortable-header",onClick:()=>M("_id"),children:["ID Orden"," ",u.key==="_id"&&(u.direction==="ascending"?e.jsx(Ce,{size:14}):e.jsx(Ne,{size:14}))]}),e.jsxs("th",{className:"sortable-header",onClick:()=>M("fecha"),children:["Fecha"," ",u.key==="fecha"&&(u.direction==="ascending"?e.jsx(Ce,{size:14}):e.jsx(Ne,{size:14}))]}),e.jsxs("th",{className:"sortable-header",onClick:()=>M("cliente"),children:["Cliente"," ",u.key==="cliente"&&(u.direction==="ascending"?e.jsx(Ce,{size:14}):e.jsx(Ne,{size:14}))]}),e.jsxs("th",{className:"sortable-header",onClick:()=>M("totalVenta"),children:["Total"," ",u.key==="totalVenta"&&(u.direction==="ascending"?e.jsx(Ce,{size:14}):e.jsx(Ne,{size:14}))]}),e.jsx("th",{children:"Pagado"}),e.jsx("th",{children:"Acciones"})]})}),e.jsx("tbody",{children:N.map(R=>{var P,S;return e.jsxs("tr",{children:[e.jsxs("td",{children:["...",R._id.substring(R._id.length-6)]}),e.jsx("td",{children:J(R.fecha).format("DD/MM/YYYY")}),e.jsx("td",{children:(P=R.clienteInfo)==null?void 0:P.nombre.toUpperCase()}),e.jsxs("td",{className:"total-amount",children:["$",(S=R==null?void 0:R.totalVenta)==null?void 0:S.toFixed(2)]}),e.jsx("td",{children:e.jsx("span",{className:`status-badge ${R.isPaid?"status-paid":"status-pending"}`,children:R.isPaid?"Pagado":"Pendiente"})}),e.jsx("td",{children:e.jsx(H,{text:"Ver Detalles",children:e.jsx(z,{to:`/order/${R._id}`,className:"action-btn",children:e.jsx(le,{size:20})})})})]},R._id)})})]}),b.length>0?e.jsx(qs,{currentPage:o,totalPages:f,onPageChange:A}):e.jsx("p",{className:"no-results-message",children:"No se encontraron 贸rdenes que coincidan con la b煤squeda."})]}):e.jsxs("div",{className:"empty-state",children:[e.jsx(Aa,{size:48}),e.jsx("p",{children:"A煤n no se han registrado 贸rdenes."})]})]})}const so=a=>async s=>{s({type:ys,payload:a});try{const{data:n}=await fe.get(`/api/productos/${a}`);s({type:Is,payload:n})}catch(n){s({type:_s,payload:n.response&&n.response.data.message?n.response.data.message:n.message})}};function ao(a){const s=Ee(),{id:n}=s;t.useRef("");const[i,o]=t.useState(0),g=Q(l=>l.userSignin),{userInfo:h}=g,m=Q(l=>l.productDetails),{product:c}=m,d=ce();t.useEffect(()=>{(!c||c._id!==n)&&d(so(n))},[d,c,n]);const x=()=>{window.print()},p=()=>{var l=document.getElementById("inputs").children;let u=[];Array.from(l).forEach(function(r){u.push(r.children[0].value)}),o(u.reduce((r,v)=>r+Number(v),0))};return e.jsxs("div",{children:[e.jsx("div",{className:"flx sb",children:e.jsx(z,{to:"/",className:"back-link",children:"volver"})}),c?e.jsxs("div",{className:"flx column",children:[e.jsx("h2",{children:"Inversiones Paul 2428, C.A."}),e.jsx("h2",{children:"Conteo Rapido"}),e.jsxs("p",{children:["Realizado por: ",(h==null?void 0:h.nombre)+" "+(h==null?void 0:h.apellido)]}),e.jsxs("p",{children:["Fecha: ",J(new Date).format("DD/MM/YYYY  hh:mm a")]}),e.jsx("button",{className:"btn-icon-container",onClick:x,children:e.jsx(Pe,{})}),e.jsxs("div",{className:" flx column astart mtop-2 mb",children:[e.jsxs("h1",{children:["Codigo: ",c==null?void 0:c.codigo]}),e.jsxs("h1",{children:["Marca: ",c==null?void 0:c.marca]}),e.jsxs("h1",{children:["Modelo: ",c==null?void 0:c.modelo," "]}),e.jsxs("h1",{children:["Color: ",c==null?void 0:c.color," "]})]}),e.jsxs("div",{children:[e.jsxs("h1",{className:"mb centrado",children:["Contados: ",i," pares"]}),e.jsxs("table",{children:[e.jsx("thead",{children:e.jsx("tr",{children:Object.keys(c.tallas).map((l,u)=>e.jsx("th",{children:l},u))})}),e.jsx("tbody",{children:e.jsx("tr",{id:"inputs",children:Object.keys(c.tallas).map((l,u)=>e.jsx("td",{children:e.jsx("input",{type:"number",className:"w-40 txt-align-r",onChange:()=>p()})},u))})})]})]}),e.jsxs("div",{className:"mtop-3",children:[e.jsx("p",{className:"",children:"Observaciones:"}),e.jsx("hr",{className:"minw-400 pad-2"}),e.jsx("hr",{className:"minw-400 pad-2"}),e.jsx("hr",{className:"minw-400 pad-2"}),e.jsx("hr",{className:"minw-400 pad-2"}),e.jsx("hr",{className:"minw-400 pad-2"}),e.jsx("hr",{className:"minw-400 pad-2"})]})]}):""]})}function ro({txt:a,tipo:s}){return e.jsxs("div",{className:"flx jcenter font-1",children:[e.jsx("div",{className:s==="mini"?"loader mini":"loader"}),e.jsx("span",{children:a})]})}function no(){const{data:a,isLoading:s,isError:n}=Xe(),[i,o]=t.useState(""),[g,h]=t.useState(1),[m]=t.useState(32),c=t.useMemo(()=>{if(!a)return[];let f=a.filter(E=>E.existencia>0);return i&&(f=f.filter(E=>E.codigo.toLowerCase().includes(i.toLowerCase()))),f.sort((E,I)=>E.codigo.localeCompare(I.codigo)),f},[a,i]),d=Math.ceil(c.length/m),x=g*m,p=x-m,l=c.slice(p,x),u=t.useMemo(()=>l.reduce((f,E)=>f+E.existencia,0),[l]),r=t.useMemo(()=>c.reduce((f,E)=>f+E.existencia,0),[c]),v=f=>{h(f)},b=()=>{window.print()};return s?e.jsx(ro,{txt:"Cargando inventario..."}):n?e.jsx("div",{className:"error",children:"Error al cargar el inventario."}):(console.log("filterCodigo:",i),e.jsxs("div",{className:"product-stock-screen-container",children:[e.jsxs("h2",{className:"centrado",children:["Lista Codigos: ",i?"Total General del Codigo "+i.toUpperCase()+" "+r+" Unidades":"Total General: "+r+" Unidades"]}),e.jsxs("div",{className:"flx jstart",children:[" ",e.jsx("div",{className:"search-input-container",children:e.jsx("input",{type:"text",placeholder:"Filtrar por c贸digo...",value:i,onChange:f=>{o(f.target.value),h(1)},className:"search-input"})}),e.jsx("div",{className:"flx gap-1",children:e.jsx(Pe,{className:"add-product-icon print-button",size:36,onClick:b})})]}),c.length===0?e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:"No se encontraron productos con existencia mayor a cero o que coincidan con la b煤squeda."})}):e.jsxs("div",{className:"table-responsive-container",children:[e.jsxs("table",{className:"product-stock-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"C贸digo"}),e.jsx("th",{children:"Marca"}),e.jsx("th",{children:"Existencia"})]})}),e.jsx("tbody",{children:l.map(f=>e.jsxs("tr",{children:[e.jsx("td",{children:f.codigo}),e.jsx("td",{className:"td-marca",children:f.marca}),e.jsx("td",{children:f.existencia})]},f._id))})]}),e.jsx("p",{className:"centrado",children:e.jsxs("strong",{children:["Total esta Pagina #",g,": ",u," Unidades"]})}),d>1&&e.jsx(qs,{currentPage:g,totalPages:d,onPageChange:v})]})]}))}const to=Ys(Hs(e.jsxs(B,{path:"/",element:e.jsx(sr,{}),children:[e.jsx(B,{index:!0,element:e.jsx(_t,{})}),e.jsx(B,{path:"/verproductos",element:e.jsx(Ft,{})}),e.jsx(B,{path:"/listaproductos",element:e.jsx(no,{})}),e.jsx(B,{path:"/verpedidos",element:e.jsx(eo,{})}),e.jsx(B,{path:"/signin",element:e.jsx(vt,{})}),e.jsx(B,{path:"/register",element:e.jsx(Rt,{})}),e.jsxs(B,{path:"",element:e.jsx(Nt,{}),children:[e.jsx(B,{path:"/admin-menu",element:e.jsx(Kt,{})}),e.jsx(B,{path:"/profile",element:e.jsx(bt,{})}),e.jsx(B,{path:"/reporteclientes",element:e.jsx(Dt,{})})]}),e.jsx(B,{path:"/product/:id/edit",element:e.jsx(Lt,{})}),e.jsx(B,{path:"/cliente/:id/edit",element:e.jsx(Ut,{})}),e.jsx(B,{path:"/facturacion",element:e.jsx(Ht,{})}),e.jsx(B,{path:"/order/:id",element:e.jsx(Zt,{})}),e.jsx(B,{path:"/print/order/:id",element:e.jsx(Xt,{})}),e.jsx(B,{path:"/crearproducto",element:e.jsx(Wt,{})}),e.jsx(B,{path:"/enconstruccion",element:e.jsx(Jt,{})}),e.jsx(B,{path:"/conteorapido/:id",element:e.jsx(ao,{})})]})));$s.createRoot(document.getElementById("root")).render(e.jsx(Xs,{store:Ls,children:e.jsx(ye.StrictMode,{children:e.jsx(Ks,{router:to})})}));
